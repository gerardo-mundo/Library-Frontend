"use strict";(self.webpackChunktest_app=self.webpackChunktest_app||[]).push([[48],{8048:(es,A,c)=>{c.r(A),c.d(A,{DashboardModule:()=>Qi});var h=c(177),n=c(4341),p=c(5779),G=c(6448),t=c(540),B=c(5887);let O=(()=>{class i{constructor(e){this.document=e;const s=localStorage.getItem("theme");s&&(this.themeSelection="dark"===s),this.switchTheme(this.themeSelection)}switchTheme(e){const s=e?"dark":"light";localStorage.setItem("theme",s),this.document.getElementById("app-theme").href=`lara-${s}-indigo.css`}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO(h.qQ))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var K=c(1631);function W(i,r){1&i&&t.nrm(0,"span",3)}function z(i,r){1&i&&t.nrm(0,"span",4)}let H=(()=>{class i{constructor(e){this.themeService=e}ngOnInit(){this.checked=this.themeService.themeSelection}changeTheme(){this.themeService.switchTheme(this.checked)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(O))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["shared-theming-button"]],decls:4,vars:3,consts:[[1,"card","flex","justify-content-center","align-items-center"],[3,"ngIf"],[3,"ngModel","ngModelChange","onChange"],[1,"pi","pi-sun","mr-2",2,"font-size","1.3rem"],[1,"pi","pi-moon","ml-2",2,"font-size","1rem"]],template:function(s,o){1&s&&(t.j41(0,"div",0),t.DNE(1,W,1,0,"ng-template",1),t.j41(2,"p-inputSwitch",2),t.bIt("ngModelChange",function(l){return o.checked=l})("onChange",function(){return o.changeTheme()}),t.k0s(),t.DNE(3,z,1,0,"ng-template",1),t.k0s()),2&s&&(t.R7$(1),t.Y8G("ngIf",!o.checked),t.R7$(1),t.Y8G("ngModel",o.checked),t.R7$(1),t.Y8G("ngIf",o.checked))},dependencies:[h.bT,K.HW,n.BC,n.vS],encapsulation:2})}return i})();var Q=c(9114),_=c(1141),Z=c(6351),D=c(8542),tt=c(5144);const et=function(i){return{"background-color":i,color:"#ffffff"}};function it(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",3),t.nrm(1,"p-avatar",4),t.j41(2,"p-button",5),t.bIt("click",function(o){t.eBV(e);const a=t.sdS(4);return t.Njj(a.toggle(o))}),t.k0s(),t.nrm(3,"p-menu",6,7)(5,"shared-theming-button"),t.k0s()}if(2&i){const e=t.XpG();t.R7$(1),t.Aen(t.eq3(7,et,e.stringToColor(e.fullName))),t.Y8G("label",e.initials),t.R7$(1),t.Y8G("fitContent",!0)("label","ger.mundo@gmail.com"),t.R7$(1),t.Y8G("model",e.accountOptions)("popup",!0)}}let st=(()=>{class i{ngOnInit(){this.firstLetter="G",this.firstLetterLN="M",this.initials=this.firstLetter+this.firstLetterLN,this.fullName="Gerardo Mundo",this.accountOptions=[{label:"Opciones",items:[{label:"Cambiar contrase\xf1a",icon:p.EE.USER_EDIT,routerLink:"change-password"},{label:"Cerrar sesi\xf3n",icon:p.EE.SIGN_OUT,routerLink:"/auth/login",command:()=>this.authService.logout()}]}],this.items=[{label:"Libros",icon:p.EE.BOOK,items:[{label:"Lista",icon:p.EE.LIST,routerLink:"books"},{label:"Agregar",icon:p.EE.PLUS,routerLink:"add-book"},{label:"Editar",icon:p.EE.FILE_EDIT,routerLink:"edit-book"}]}]}constructor(e){this.authService=e}stringToColor(e){let o,s=0;for(o=0;o<e.length;o+=1)s=e.charCodeAt(o)+((s<<5)-s);let a="#";for(o=0;o<3;o+=1)a+=`00${(s>>8*o&255).toString(16)}`.slice(-2);return a}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(B.k))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["dashboard-menu-bar"]],decls:3,vars:1,consts:[[1,"card","px-10"],["styleClass","py-4",3,"model"],["pTemplate","end"],[1,"flex","align-items-center","mr-4"],["size","large",3,"label"],["icon","pi pi-cog","iconPos","right","pTooltip","Opciones de cuenta","tooltipPosition","bottom","severity","info","styleClass","p-button-text",3,"fitContent","label","click"],[3,"model","popup"],["menu",""]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p-menubar",1),t.DNE(2,it,6,9,"ng-template",2),t.k0s()()),2&s&&(t.R7$(1),t.Y8G("model",o.items))},dependencies:[H,Q.e,_.$n,p.Ei,Z.n2,D.m,tt.W1],encapsulation:2})}return i})(),ot=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-layout"]],decls:2,vars:0,template:function(s,o){1&s&&t.nrm(0,"dashboard-menu-bar")(1,"router-outlet")},dependencies:[G.n3,st],encapsulation:2})}return i})();const F=(i,r)=>r.controls[i].errors&&r.controls[i].touched,b=(i,r)=>{if(!r.controls[i].errors)return null;const e=r.controls[i].errors??{};for(const s of Object.keys(e))switch(s){case"required":return"*Este campo es requerido";case"minlength":return`*${r.controls[i].value.length} no es una extensi\xf3n m\xednima v\xe1lida`;case"maxlength":return`*${r.controls[i].value.length} es superior al l\xedmite de caracteres`;case"cantBeZero":return"*Debe ser mayor a cero";case"email":return`*${r.controls[i].value} no es un email v\xe1lido`;case"pattern":return"*La contrase\xf1a debe tener un n\xfamero, un caracter especial y una may\xfascula"}return null},C=i=>i.value<=0?{cantBeZero:!0}:null;var E=c(1626),u=c(9437),m=c(1171),j=c(5312);let S=(()=>{class i{constructor(e){this.http=e,this.BASE_URL=j.M.BASE_URL,this.headers={headers:new E.Lr({"Content-Type":"application/json-patch+json"})}}createAccount(e){return this.http.post(`${this.BASE_URL}/accounts/register`,e).pipe((0,u.W)(s=>(0,m.u)(s)))}getAccountsList(){return this.http.get(`${this.BASE_URL}/accounts/get-accounts`).pipe((0,u.W)(e=>(0,m.u)(e)))}updatePassword(e){return this.http.patch(`${this.BASE_URL}/accounts/update-password`,e,this.headers).pipe((0,u.W)(s=>(0,m.u)(s)))}makeAdminAccount(e){return this.http.post(`${this.BASE_URL}/accounts/make-admin`,{email:e}).pipe((0,u.W)(o=>(0,m.u)(o)))}removeAdminAccount(e){return this.http.post(`${this.BASE_URL}/accounts/remove-admin`,{email:e}).pipe((0,u.W)(o=>(0,m.u)(o)))}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO(E.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var nt=c(229),g=c(7722);let y=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["dashboard-add-button"]],inputs:{isLoading:"isLoading",invalid:"invalid",label:"label"},decls:4,vars:3,consts:[["type","submit","pButton","","pRipple","",1,"sm:w-max","w-full","justify-content-center","mt-4",3,"disabled","loading"],[1,"mr-2","font-medium"],[1,"pi","pi-save"]],template:function(s,o){if(1&s&&(t.j41(0,"button",0)(1,"span",1),t.EFF(2),t.k0s(),t.nrm(3,"i",2),t.k0s()),2&s){let a;t.Y8G("disabled",o.invalid)("loading",o.isLoading),t.R7$(2),t.JRh(null!==(a=o.label)&&void 0!==a?a:"Agregar")}},dependencies:[_._f],encapsulation:2})}return i})();function rt(i,r){if(1&i&&(t.j41(0,"small",13),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("firstPassword"))}}function at(i,r){if(1&i&&(t.j41(0,"small",13),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("password"))}}const $=function(){return{width:"100%"}},V=function(i){return{"ng-invalid ng-dirty":i}};let lt=(()=>{class i{constructor(e,s,o){this.fb=e,this.accountsService=s,this.messageService=o,this.loading=!1,this.passwordForm=this.fb.group({firstPassword:["",[n.k0.required,n.k0.minLength(7),n.k0.pattern("^(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()-_+=])[A-Za-z\\d!@#$%^&*()-_+=]{7,}$")]],password:["",[n.k0.required,n.k0.minLength(7),n.k0.pattern("^(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()-_+=])[A-Za-z\\d!@#$%^&*()-_+=]{7,}$")]]})}onChangePassword(){const{firstPassword:e,password:s}=this.passwordForm.value,o={password:s};if(e!==s)return this.messageService.add({severity:"error",summary:"Error",detail:"Las contrase\xf1as deben ser iguales"}),void this.passwordForm.markAllAsTouched();this.loading=!0,this.accountsService.updatePassword(o).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Contrase\xf1a actualizada"}),this.loading=!1},error:a=>{this.messageService.add({severity:"error",summary:"Ups",detail:`${a}`}),this.loading=!1}})}isValidField(e){return F(e,this.passwordForm)}displayError(e){return b(e,this.passwordForm)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(S),t.rXU(p.bg))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-change-password-page"]],decls:18,vars:25,consts:[[1,"text-primary","mt-4","ml-2"],[1,"flex","flex-column","align-items-center","surface-section","py-6","px-4",3,"formGroup","ngSubmit"],[1,"w-full","sm:w-6","mb-6"],[1,"p-float-label","mt-5"],["formControlName","firstPassword","promptLabel","Seguridad de tu contrase\xf1a",1,"w-full",3,"toggleMask","inputStyle","ngClass"],["htmlFor","firstPassword"],["class","ml-2 text-red-500",4,"ngIf"],[1,"w-full","sm:w-6"],["formControlName","password",1,"w-full",3,"toggleMask","inputStyle","feedback","ngClass"],["htmlFor","password"],[1,"flex","w-full","flex-column","sm:w-6"],[3,"isLoading","label","invalid"],["position","top-center"],[1,"ml-2","text-red-500"]],template:function(s,o){if(1&s&&(t.j41(0,"p",0),t.EFF(1,"Registra una nueva cuenta en el sistema"),t.k0s(),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return o.onChangePassword()}),t.j41(3,"div",2)(4,"div",3),t.nrm(5,"p-password",4),t.j41(6,"label",5),t.EFF(7,"Contrase\xf1a"),t.k0s()(),t.DNE(8,rt,2,1,"small",6),t.k0s(),t.j41(9,"div",7)(10,"div",3),t.nrm(11,"p-password",8),t.j41(12,"label",9),t.EFF(13,"Repite tu contrase\xf1a"),t.k0s()(),t.DNE(14,at,2,1,"small",6),t.k0s(),t.j41(15,"div",10),t.nrm(16,"dashboard-add-button",11),t.k0s(),t.nrm(17,"p-toast",12),t.k0s()),2&s){let a,l;t.R7$(2),t.Y8G("formGroup",o.passwordForm),t.R7$(3),t.Aen(t.lJ4(17,$)),t.Y8G("toggleMask",!0)("inputStyle",t.lJ4(18,$))("ngClass",t.eq3(19,V,(null==(a=o.passwordForm.get("firstPassword"))?null:a.invalid)&&((null==(a=o.passwordForm.get("firstPassword"))?null:a.dirty)||(null==(a=o.passwordForm.get("firstPassword"))?null:a.touched)))),t.R7$(3),t.Y8G("ngIf",o.isValidField("firstPassword")),t.R7$(3),t.Aen(t.lJ4(21,$)),t.Y8G("toggleMask",!0)("inputStyle",t.lJ4(22,$))("feedback",!1)("ngClass",t.eq3(23,V,(null==(l=o.passwordForm.get("password"))?null:l.invalid)&&((null==(l=o.passwordForm.get("password"))?null:l.dirty)||(null==(l=o.passwordForm.get("password"))?null:l.touched)))),t.R7$(3),t.Y8G("ngIf",o.isValidField("password")),t.R7$(2),t.Y8G("isLoading",o.loading)("label","Guardar")("invalid",o.passwordForm.invalid)}},dependencies:[h.YU,h.bT,n.qT,n.BC,n.cb,n.j4,n.JD,nt._2,g.y8,y],encapsulation:2})}return i})();var f=c(2242);function pt(i,r){if(1&i&&(t.j41(0,"small",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("email"))}}function ct(i,r){if(1&i&&(t.j41(0,"small",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("password"))}}function ut(i,r){if(1&i&&(t.j41(0,"small",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("name"))}}function mt(i,r){if(1&i&&(t.j41(0,"small",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("lastName"))}}function dt(i,r){if(1&i&&(t.j41(0,"small",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("employeeKey"))}}let ht=(()=>{class i{constructor(e,s,o){this.fb=e,this.accountsService=s,this.messageService=o,this.registerForm=this.fb.group({email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required,n.k0.minLength(7),n.k0.pattern("^(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*()-_+=])[A-Za-z\\d!@#$%^&*()-_+=]{7,}$")]],name:["",[n.k0.required,n.k0.maxLength(100)]],lastName:["",[n.k0.required,n.k0.maxLength(100)]],employeeKey:["",[n.k0.required,n.k0.maxLength(10),n.k0.minLength(10)]]}),this.loading=!1}onNewAccount(){this.registerForm.invalid?this.registerForm.markAllAsTouched():(this.loading=!0,this.accountsService.createAccount(this.registerForm.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Publicaci\xf3n agregada correctamente"}),this.loading=!1,this.registerForm.reset()},error:e=>{this.messageService.add({severity:"error",summary:"Ups",detail:`${e}`}),this.loading=!1}}))}isValidField(e){return F(e,this.registerForm)}displayError(e){return b(e,this.registerForm)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(S),t.rXU(p.bg))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-new-account-page"]],decls:36,vars:9,consts:[[1,"flex","flex-column","align-items-center","surface-section","py-6","px-4",3,"formGroup","ngSubmit"],[1,"text-primary","mt-4","ml-2"],[1,"w-full","sm:w-6"],[1,"p-float-label","mt-5"],["formControlName","email","type","text","pInputText","","id","email",1,"w-full"],["htmlFor","email"],["class","ml-2 text-red-500",4,"ngIf"],["formControlName","password","type","password","pInputText","","id","password",1,"w-full"],["htmlFor","password"],["formControlName","name","type","text","pInputText","","id","name",1,"w-full"],["htmlFor","name"],["formControlName","lastName","type","text","pInputText","","id","lastName",1,"w-full"],["htmlFor","lastName"],["formControlName","employeeKey","type","text","pInputText","","id","employeeKey",1,"w-full"],["htmlFor","employeeKey"],[1,"flex","w-full","flex-column","sm:w-6"],[3,"isLoading","label","invalid"],["position","top-center"],[1,"ml-2","text-red-500"]],template:function(s,o){1&s&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return o.onNewAccount()}),t.j41(1,"p",1),t.EFF(2,"Registra una nueva cuenta en el sistema"),t.k0s(),t.j41(3,"div",2)(4,"div",3),t.nrm(5,"input",4),t.j41(6,"label",5),t.EFF(7,"Correo"),t.k0s()(),t.DNE(8,pt,2,1,"small",6),t.k0s(),t.j41(9,"div",2)(10,"div",3),t.nrm(11,"input",7),t.j41(12,"label",8),t.EFF(13,"Contrase\xf1a"),t.k0s()(),t.DNE(14,ct,2,1,"small",6),t.k0s(),t.j41(15,"div",2)(16,"div",3),t.nrm(17,"input",9),t.j41(18,"label",10),t.EFF(19,"Nombres"),t.k0s()(),t.DNE(20,ut,2,1,"small",6),t.k0s(),t.j41(21,"div",2)(22,"div",3),t.nrm(23,"input",11),t.j41(24,"label",12),t.EFF(25,"Apellidos"),t.k0s()(),t.DNE(26,mt,2,1,"small",6),t.k0s(),t.j41(27,"div",2)(28,"div",3),t.nrm(29,"input",13),t.j41(30,"label",14),t.EFF(31,"Clave de empleado"),t.k0s()(),t.DNE(32,dt,2,1,"small",6),t.k0s(),t.j41(33,"div",15),t.nrm(34,"dashboard-add-button",16),t.k0s(),t.nrm(35,"p-toast",17),t.k0s()),2&s&&(t.Y8G("formGroup",o.registerForm),t.R7$(8),t.Y8G("ngIf",o.isValidField("email")),t.R7$(6),t.Y8G("ngIf",o.isValidField("password")),t.R7$(6),t.Y8G("ngIf",o.isValidField("name")),t.R7$(6),t.Y8G("ngIf",o.isValidField("lastName")),t.R7$(6),t.Y8G("ngIf",o.isValidField("employeeKey")),t.R7$(2),t.Y8G("isLoading",o.loading)("label","Guardar")("invalid",o.registerForm.invalid))},dependencies:[h.bT,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,f.S,g.y8,y],encapsulation:2})}return i})();var d=c(8330);function gt(i,r){1&i&&(t.j41(0,"tr")(1,"th",6),t.EFF(2,"Nombre(s)"),t.k0s(),t.j41(3,"th",6),t.EFF(4,"Apellidos"),t.k0s(),t.j41(5,"th",6),t.EFF(6,"Email"),t.k0s(),t.j41(7,"th",6),t.EFF(8,"Num. de empleado"),t.k0s(),t.j41(9,"th",6),t.EFF(10,"Volver administrador"),t.k0s()())}function ft(i,r){1&i&&(t.qex(0),t.nrm(1,"i",13),t.bVm())}function _t(i,r){1&i&&(t.j41(0,"span",14),t.EFF(1,"Aceptar"),t.k0s())}function Ft(i,r){1&i&&(t.qex(0),t.nrm(1,"i",13),t.bVm())}function bt(i,r){1&i&&(t.j41(0,"span",14),t.EFF(1,"Remover"),t.k0s())}function kt(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"div",7)(11,"button",8),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onMakeAdmin(null==a?null:a.email))}),t.DNE(12,ft,2,0,"ng-container",9),t.DNE(13,_t,2,0,"ng-template",null,10,t.C5r),t.k0s(),t.j41(15,"button",11),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onRemoveAdmin(null==a?null:a.email))}),t.DNE(16,Ft,2,0,"ng-container",9),t.DNE(17,bt,2,0,"ng-template",null,12,t.C5r),t.k0s()()()()}if(2&i){const e=r.$implicit,s=t.sdS(14),o=t.sdS(18),a=t.XpG();t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.lastName),t.R7$(2),t.JRh(e.email),t.R7$(2),t.JRh(e.employeeKey),t.R7$(3),t.Y8G("disabled",!a.userAccount.isAdmin||a.userAccount.email===e.email),t.R7$(1),t.Y8G("ngIf",a.isLoading)("ngIfElse",s),t.R7$(3),t.Y8G("disabled",!a.userAccount.isAdmin),t.R7$(1),t.Y8G("ngIf",a.isLoading)("ngIfElse",o)}}const vt=function(){return{"min-width":"50rem"}},Et=function(){return[10,20]};let yt=(()=>{class i{constructor(e,s,o){this.accountsService=e,this.messageService=s,this.authService=o,this.accounts=[],this.userAccount=this.authService.getUserDataToken(),this.isLoading=!1}ngOnInit(){this.getAccounts()}getAccounts(){this.accountsService.getAccountsList().subscribe(e=>this.accounts=e)}onMakeAdmin(e){this.isLoading=!0,this.accountsService.makeAdminAccount(e).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:`${e} ahora es administrador`}),this.isLoading=!1},error:s=>{this.messageService.add({severity:"error",summary:"Ups",detail:`${s.text}`}),this.isLoading=!1}})}onRemoveAdmin(e){this.isLoading=!0,this.accountsService.removeAdminAccount(e).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:`${e} ya no es administrador`}),this.isLoading=!1},error:s=>{this.messageService.add({severity:"error",summary:"Ups",detail:`${s?.text}`}),console.log(s),this.isLoading=!1}})}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(S),t.rXU(p.bg),t.rXU(B.k))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-registered-accounts-page"]],decls:7,vars:8,consts:[[1,"card","surface-section","py-6","px-4"],[1,"text-primary","ml-2","mt-4"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas","paginatorLocale","es-Es",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["position","top-center"],[2,"width","20%"],[1,"flex","gap-2"],["type","button","pButton","","pRipple","",3,"disabled","click"],[4,"ngIf","ngIfElse"],["noLoading",""],["type","button","pButton","","pRipple","",1,"p-button-danger",3,"disabled","click"],["noLoading2",""],[1,"pi","pi-spin","pi-spinner",2,"font-size","1.4rem"],[1,"font-medium"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Lista de cuentas de administradores y auxiliares registrados:"),t.k0s(),t.j41(3,"p-table",2),t.DNE(4,gt,11,0,"ng-template",3),t.DNE(5,kt,19,10,"ng-template",4),t.k0s(),t.nrm(6,"p-toast",5),t.k0s()),2&s&&(t.R7$(3),t.Y8G("value",o.accounts)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.lJ4(6,vt))("rowsPerPageOptions",t.lJ4(7,Et)))},dependencies:[h.bT,_._f,p.Ei,d.XI,g.y8],encapsulation:2})}return i})();var k=c(8810);let x=(()=>{class i{constructor(e){this.http=e,this.baseUrl=j.M.BASE_URL}getBooks(){return this.http.get(`${this.baseUrl}/books`)}postBook(e){return null===e?(0,k.$)(()=>new Error("Valores incorrectos")):this.http.post(`${this.baseUrl}/books`,e).pipe((0,u.W)(s=>(0,m.u)(s)))}updateBook(e,s){return void 0===e||null===s?(0,k.$)(()=>new Error("Valores incorrectos")):this.http.put(`${this.baseUrl}/books/${e}`,s).pipe((0,u.W)(o=>(0,m.u)(o)))}deleteBook(e){return null===e?(0,k.$)(()=>new Error(`${e} no es un Id v\xe1lido`)):this.http.delete(`${this.baseUrl}/books/${e}`).pipe((0,u.W)(s=>(0,m.u)(s)))}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO(E.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function jt(i,r){if(1&i&&(t.j41(0,"small",30),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("title"))}}function Rt(i,r){if(1&i&&(t.j41(0,"small",30),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("authorName"))}}function xt(i,r){if(1&i&&(t.j41(0,"small",30),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("lastName"))}}function Tt(i,r){if(1&i&&(t.j41(0,"small",30),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("publisher"))}}function Ct(i,r){if(1&i&&(t.j41(0,"small",30),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("adquisition"))}}function St(i,r){if(1&i&&(t.j41(0,"small",30),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("year"))}}function $t(i,r){if(1&i&&(t.j41(0,"small",30),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("collection"))}}function wt(i,r){if(1&i&&(t.j41(0,"small",30),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("copies"))}}let Nt=(()=>{class i{constructor(e,s,o){this.fb=e,this.bookService=s,this.messageService=o,this.form=this.fb.group({title:["",[n.k0.required]],authorName:["",[n.k0.required]],authorSecondName:[""],lastName:["",[n.k0.required]],authorMotherName:[""],publisher:["",[n.k0.required]],adquisition:[null,[n.k0.required,n.k0.minLength(4),C]],year:[null,[n.k0.required,n.k0.minLength(4),n.k0.maxLength(4)]],collection:["",[n.k0.required]],copies:[null,[n.k0.required,C]]}),this.loading=!1}onSave(){this.form.invalid?this.form.markAllAsTouched():(this.loading=!0,this.bookService.postBook(this.form.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Libro agregado correctamente"}),this.loading=!1,this.form.reset()},error:e=>{this.messageService.add({severity:"error",summary:"Ups",detail:`${e}`}),this.loading=!1}}))}isValidField(e){return F(e,this.form)}displayError(e){return b(e,this.form)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(x),t.rXU(p.bg))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-add-book-page"]],decls:70,vars:11,consts:[[1,"card","surface-section","p-6"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"font-medium","text-primary"],[1,"formgrid","grid"],[1,"field","col-12","sm:col-6"],[1,"p-float-label","mt-5"],["formControlName","title","type","text","pInputText","","id","title",1,"w-full"],["htmlFor","title"],["class","ml-2 text-red-500",4,"ngIf"],["formControlName","authorName","type","text","pInputText","","id","authorName",1,"w-full"],["htmlFor","authorName"],["formControlName","authorSecondName","type","text","pInputText","","id","authorSecondName",1,"w-full"],["htmlFor","authorSecondName"],["formControlName","lastName","type","text","pInputText","","id","lastName",1,"w-full"],["htmlFor","lastName"],["formControlName","authorMotherName","type","text","pInputText","","id","authorMotherName",1,"w-full"],["htmlFor","authorMotherName"],["formControlName","publisher","type","text","pInputText","","id","publisher",1,"w-full"],["htmlFor","publisher"],["formControlName","adquisition","type","number","pInputText","","id","adquisition",1,"w-full"],["htmlFor","adquisition"],["formControlName","year","type","year","pInputText","","id","year",1,"w-full"],["htmlFor","year"],["formControlName","collection","type","text","pInputText","","id","collection",1,"w-full"],["htmlFor","collection"],["formControlName","copies","type","number","pInputText","","id","copies",1,"w-full"],["htmlFor","copies"],[1,"flex","w-full","flex-column","sm:w-6"],[3,"isLoading","invalid"],["position","top-center"],[1,"ml-2","text-red-500"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return o.onSave()}),t.j41(2,"p",2),t.EFF(3,"Agrega un nuevo libro a la colecci\xf3n:"),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"div",5),t.nrm(7,"input",6),t.j41(8,"label",7),t.EFF(9,"T\xedtulo del libro"),t.k0s()(),t.DNE(10,jt,2,1,"small",8),t.k0s(),t.j41(11,"div",4)(12,"div",5),t.nrm(13,"input",9),t.j41(14,"label",10),t.EFF(15,"Nombre del autor"),t.k0s()(),t.DNE(16,Rt,2,1,"small",8),t.k0s()(),t.j41(17,"div",3)(18,"div",4)(19,"div",5),t.nrm(20,"input",11),t.j41(21,"label",12),t.EFF(22,"Segundo nombre"),t.k0s()()(),t.j41(23,"div",4)(24,"div",5),t.nrm(25,"input",13),t.j41(26,"label",14),t.EFF(27,"Apellido"),t.k0s()(),t.DNE(28,xt,2,1,"small",8),t.k0s()(),t.j41(29,"div",3)(30,"div",4)(31,"div",5),t.nrm(32,"input",15),t.j41(33,"label",16),t.EFF(34,"Apellido materno"),t.k0s()()(),t.j41(35,"div",4)(36,"div",5),t.nrm(37,"input",17),t.j41(38,"label",18),t.EFF(39,"Editorial"),t.k0s()(),t.DNE(40,Tt,2,1,"small",8),t.k0s()(),t.j41(41,"div",3)(42,"div",4)(43,"div",5),t.nrm(44,"input",19),t.j41(45,"label",20),t.EFF(46,"Adquisici\xf3n"),t.k0s()(),t.DNE(47,Ct,2,1,"small",8),t.k0s(),t.j41(48,"div",4)(49,"div",5),t.nrm(50,"input",21),t.j41(51,"label",22),t.EFF(52,"A\xf1o"),t.k0s()(),t.DNE(53,St,2,1,"small",8),t.k0s()(),t.j41(54,"div",3)(55,"div",4)(56,"div",5),t.nrm(57,"input",23),t.j41(58,"label",24),t.EFF(59,"Colecci\xf3n"),t.k0s()(),t.DNE(60,$t,2,1,"small",8),t.k0s(),t.j41(61,"div",4)(62,"div",5),t.nrm(63,"input",25),t.j41(64,"label",26),t.EFF(65,"Copias"),t.k0s()(),t.DNE(66,wt,2,1,"small",8),t.k0s()(),t.j41(67,"div",27),t.nrm(68,"dashboard-add-button",28),t.k0s(),t.nrm(69,"p-toast",29),t.k0s()()),2&s&&(t.R7$(1),t.Y8G("formGroup",o.form),t.R7$(9),t.Y8G("ngIf",o.isValidField("title")),t.R7$(6),t.Y8G("ngIf",o.isValidField("authorName")),t.R7$(12),t.Y8G("ngIf",o.isValidField("lastName")),t.R7$(12),t.Y8G("ngIf",o.isValidField("publisher")),t.R7$(7),t.Y8G("ngIf",o.isValidField("adquisition")),t.R7$(6),t.Y8G("ngIf",o.isValidField("year")),t.R7$(7),t.Y8G("ngIf",o.isValidField("collection")),t.R7$(6),t.Y8G("ngIf",o.isValidField("copies")),t.R7$(2),t.Y8G("isLoading",o.loading)("invalid",o.form.invalid))},dependencies:[h.bT,n.qT,n.me,n.Q0,n.BC,n.cb,n.j4,n.JD,f.S,g.y8,y],encapsulation:2})}return i})();function Pt(i,r){1&i&&(t.j41(0,"tr")(1,"th",5),t.EFF(2,"T\xedtulo"),t.k0s(),t.j41(3,"th",5),t.EFF(4,"Autor"),t.k0s(),t.j41(5,"th",5),t.EFF(6,"Segundo nombre"),t.k0s(),t.j41(7,"th",5),t.EFF(8,"Apellido"),t.k0s(),t.j41(9,"th",5),t.EFF(10,"Apellido materno"),t.k0s(),t.j41(11,"th",5),t.EFF(12,"Editorial"),t.k0s(),t.j41(13,"th",5),t.EFF(14,"Adquisici\xf3n"),t.k0s(),t.j41(15,"th",5),t.EFF(16,"A\xf1o"),t.k0s(),t.j41(17,"th",5),t.EFF(18,"Colecci\xf3n"),t.k0s(),t.j41(19,"th",5),t.EFF(20,"Copias"),t.k0s()())}function It(i,r){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td"),t.EFF(16),t.k0s(),t.j41(17,"td"),t.EFF(18),t.k0s(),t.j41(19,"td"),t.EFF(20),t.k0s()()),2&i){const e=r.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(2),t.JRh(e.authorName),t.R7$(2),t.JRh(e.authorSecondName),t.R7$(2),t.JRh(e.lastName),t.R7$(2),t.JRh(e.authorMotherName),t.R7$(2),t.JRh(e.publisher),t.R7$(2),t.JRh(e.adquisition),t.R7$(2),t.JRh(e.year),t.R7$(2),t.JRh(e.collection),t.R7$(2),t.JRh(e.copies)}}const Gt=function(){return{"min-width":"50rem"}},Lt=function(){return[10,20]};let At=(()=>{class i{ngOnInit(){this.booksService.getBooks().subscribe(e=>this.books=e)}constructor(e){this.booksService=e,this.books=[]}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(x))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-books-page"]],decls:6,vars:8,consts:[[1,"card","surface-section","py-6","px-4"],[1,"font-medium","text-primary"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas","paginatorLocale","es-Es",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[2,"width","10%"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Inventario de libros dados de alta"),t.k0s(),t.j41(3,"p-table",2),t.DNE(4,Pt,21,0,"ng-template",3),t.DNE(5,It,21,10,"ng-template",4),t.k0s()()),2&s&&(t.R7$(3),t.Y8G("value",o.books)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.lJ4(6,Gt))("rowsPerPageOptions",t.lJ4(7,Lt)))},dependencies:[p.Ei,d.XI],encapsulation:2})}return i})();var Bt=c(4412);let v=(()=>{class i{constructor(){this.isVisibleSubject=new Bt.t(!1),this.isVisible$=this.isVisibleSubject.asObservable()}setVisibility(e){this.isVisibleSubject.next(e)}filtering(e,s,o){o.filterGlobal(e.target.value,s)}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}return i})();var w=c(4799),L=c(1570);function Dt(i,r){if(1&i&&(t.j41(0,"small",26),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("title"))}}function Vt(i,r){if(1&i&&(t.j41(0,"small",26),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.SpI("",e.displayError("authorName")," ")}}function Xt(i,r){if(1&i&&(t.j41(0,"small",26),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("lastName"))}}function Jt(i,r){if(1&i&&(t.j41(0,"small",26),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("publisher"))}}function Ut(i,r){if(1&i&&(t.j41(0,"small",26),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("adquisition"))}}function Yt(i,r){if(1&i&&(t.j41(0,"small",26),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("year"))}}function qt(i,r){if(1&i&&(t.j41(0,"small",26),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("copies"))}}function Mt(i,r){if(1&i&&(t.j41(0,"form",3)(1,"div",4)(2,"label",5),t.EFF(3,"T\xedtulo"),t.k0s(),t.nrm(4,"input",6),t.DNE(5,Dt,2,1,"small",7),t.k0s(),t.j41(6,"div",4)(7,"label",8),t.EFF(8,"Nombre del autor"),t.k0s(),t.nrm(9,"input",9),t.DNE(10,Vt,2,1,"small",7),t.k0s(),t.j41(11,"div",4)(12,"label",10),t.EFF(13,"Segundo nombre"),t.k0s(),t.nrm(14,"input",11),t.k0s(),t.j41(15,"div",4)(16,"label",12),t.EFF(17,"Apellido"),t.k0s(),t.nrm(18,"input",13),t.DNE(19,Xt,2,1,"small",7),t.k0s(),t.j41(20,"div",4)(21,"label",14),t.EFF(22,"Apellido materno"),t.k0s(),t.nrm(23,"input",15),t.k0s(),t.j41(24,"div",4)(25,"label",16),t.EFF(26,"Editorial"),t.k0s(),t.nrm(27,"input",17),t.DNE(28,Jt,2,1,"small",7),t.k0s(),t.j41(29,"div",4)(30,"label",18),t.EFF(31,"Adquisici\xf3n"),t.k0s(),t.nrm(32,"input",19),t.DNE(33,Ut,2,1,"small",7),t.k0s(),t.j41(34,"div",4)(35,"label",20),t.EFF(36,"A\xf1o"),t.k0s(),t.nrm(37,"input",21),t.DNE(38,Yt,2,1,"small",7),t.k0s(),t.j41(39,"div",4)(40,"label",22),t.EFF(41,"Colecci\xf3n"),t.k0s(),t.nrm(42,"input",23),t.k0s(),t.j41(43,"div",4)(44,"label",24),t.EFF(45,"Copias"),t.k0s(),t.nrm(46,"input",25),t.DNE(47,qt,2,1,"small",7),t.k0s()()),2&i){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(5),t.Y8G("ngIf",e.isValidField("title")),t.R7$(5),t.Y8G("ngIf",e.isValidField("authorName")),t.R7$(9),t.Y8G("ngIf",e.isValidField("lastName")),t.R7$(9),t.Y8G("ngIf",e.isValidField("publisher")),t.R7$(5),t.Y8G("ngIf",e.isValidField("adquisition")),t.R7$(5),t.Y8G("ngIf",e.isValidField("year")),t.R7$(9),t.Y8G("ngIf",e.isValidField("copies"))}}function Ot(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",27),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.hideDialog())}),t.k0s(),t.j41(1,"button",28),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.saveBook())}),t.k0s()}}const X=function(){return{width:"450px"}};let Kt=(()=>{class i{ngOnInit(){this.utilitiesService.isVisible$.subscribe(e=>{this.isVisible=e})}ngOnChanges(e){e.book&&this.patchFormValues()}constructor(e,s,o,a){this.fb=e,this.messageService=s,this.bookService=o,this.utilitiesService=a,this.updatedBooks=new t.bkB,this.isVisible=!1,this.submitted=!1,this.form=this.fb.group({title:[this.book?.title,[n.k0.required]],authorName:[this.book?.authorName,[n.k0.required]],authorSecondName:[this.book?.authorSecondName],lastName:[this.book?.lastName,[n.k0.required]],authorMotherName:[this.book?.authorMotherName],publisher:[this.book?.publisher,[n.k0.required]],adquisition:[this.book?.adquisition,[n.k0.required,n.k0.minLength(4),C]],year:[this.book?.year,[n.k0.required,n.k0.minLength(4),n.k0.maxLength(4)]],collection:[this.book?.collection,[n.k0.required]],copies:[this.book?.copies,[n.k0.required,C]]})}hideDialog(){this.isVisible=!1}saveBook(){this.form.invalid?this.form.markAllAsTouched():(this.bookService.updateBook(this.book.id,this.form.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Se actualiz\xf3 el registro"}),this.bookService.getBooks().subscribe(e=>this.updatedBooks.emit(e))},error:e=>{this.messageService.add({severity:"error",summary:"Ups!",detail:`${e}`})}}),this.isVisible=!1)}isValidField(e){return F(e,this.form)}displayError(e){return b(e,this.form)}patchFormValues(){this.book&&this.form.patchValue(this.book)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(p.bg),t.rXU(x),t.rXU(v))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["dashboard-modal-dialog"]],inputs:{book:"book"},outputs:{updatedBooks:"updatedBooks"},features:[t.OA$],decls:4,vars:8,consts:[["header","Editar libro","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[3,"formGroup"],[1,"field"],["for","title"],["formControlName","title","type","text","pInputText","","id","title","required",""],["class","ml-2 text-red-500",4,"ngIf"],["for","authorName"],["formControlName","authorName","type","text","pInputText","","id","authorName","required",""],["for","authorSecondName"],["formControlName","authorSecondName","type","text","pInputText","","id","authorSecondName"],["for","lastName"],["formControlName","lastName","type","text","pInputText","","id","lastName","required",""],["for","authorMotherName"],["formControlName","authorMotherName","type","text","pInputText","","id","authorMotherName"],["for","publisher"],["formControlName","publisher","type","text","pInputText","","id","publisher","required",""],["for","adquisition"],["formControlName","adquisition","type","number","pInputText","","id","adquisition","required",""],["for","year"],["formControlName","year","type","year","pInputText","","id","year","required",""],["for","collection"],["formControlName","collection","type","text","pInputText","","id","collection"],["for","copies"],["formControlName","copies","type","number","pInputText","","id","copies","required",""],[1,"ml-2","text-red-500"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(s,o){1&s&&(t.j41(0,"p-dialog",0),t.bIt("visibleChange",function(l){return o.isVisible=l}),t.DNE(1,Mt,48,8,"ng-template",1),t.DNE(2,Ot,2,0,"ng-template",2),t.k0s(),t.nrm(3,"p-confirmDialog")),2&s&&(t.Aen(t.lJ4(6,X)),t.Y8G("visible",o.isVisible)("modal",!0),t.R7$(3),t.Aen(t.lJ4(7,X)))},dependencies:[h.bT,n.qT,n.me,n.Q0,n.BC,n.cb,n.YS,n.j4,n.JD,_._f,p.Ei,w.T,L.l,f.S],encapsulation:2})}return i})();const Wt=["dt"];function zt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",9)(1,"h5",10),t.EFF(2,"B\xfasqueda por t\xedtulo de la obra o por colecci\xf3n"),t.k0s(),t.j41(3,"span",11),t.nrm(4,"i",12),t.j41(5,"input",13,14),t.bIt("input",function(o){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilterGlobal(o,"contains"))}),t.k0s()()()}}function Ht(i,r){1&i&&(t.j41(0,"tr")(1,"th",15),t.EFF(2,"T\xedtulo"),t.nrm(3,"p-sortIcon",16),t.k0s(),t.j41(4,"th",17),t.EFF(5," Adquisici\xf3n"),t.nrm(6,"p-sortIcon",18),t.k0s(),t.j41(7,"th",19),t.EFF(8,"A\xf1o"),t.nrm(9,"p-sortIcon",20),t.k0s(),t.j41(10,"th",21),t.EFF(11," Colecci\xf3n"),t.nrm(12,"p-sortIcon",22),t.k0s(),t.j41(13,"th",23),t.EFF(14,"Copias"),t.nrm(15,"p-sortIcon",24),t.k0s(),t.nrm(16,"th"),t.k0s())}function Qt(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td")(12,"button",25),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.editBook(a))}),t.k0s(),t.j41(13,"button",26),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.deleteBook(a))}),t.k0s()()()}if(2&i){const e=r.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(2),t.JRh(e.adquisition),t.R7$(2),t.JRh(e.year),t.R7$(2),t.JRh(e.collection),t.R7$(2),t.JRh(e.copies)}}function Zt(i,r){if(1&i&&(t.j41(0,"div",27),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI(" Hay un total de ",e.books?e.books.length:0," libros en la base de datos ")}}const te=function(){return["title","collection"]},ee=function(){return{"min-width":"75rem"}};let ie=(()=>{class i{ngOnInit(){this.booksService.getBooks().subscribe(e=>this.books=e),this.utilitiesService.setVisibility(!1)}constructor(e,s,o,a){this.confirmationService=e,this.messageService=s,this.booksService=o,this.utilitiesService=a,this.books=[],this.submitted=!1}editBook(e){this.utilitiesService.setVisibility(!0),this.book=e}deleteBook(e){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de eliminar: "+e.title+"?",header:"Confirmar acci\xf3n",icon:"pi pi-exclamation-triangle",accept:()=>{this.booksService.deleteBook(e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Libro eliminado",life:3e3}),this.books=this.books.filter(s=>s.id!==e.id)},error:s=>{this.messageService.add({severity:"error",summary:"Error",detail:`${s}`,life:3e3})}})}})}updateBooks(e){this.books=e}applyFilterGlobal(e,s){this.utilitiesService.filtering(e,s,this.dt)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(p.td),t.rXU(p.bg),t.rXU(x),t.rXU(v))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-edit-book-page"]],viewQuery:function(s,o){if(1&s&&t.GBs(Wt,5),2&s){let a;t.mGM(a=t.lsd())&&(o.dt=a.first)}},decls:11,vars:11,consts:[[1,"card","surface-section","py-6","px-4"],[1,"font-medium","text-primary"],["dataKey","id","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas",3,"value","rows","paginator","globalFilterFields","showLoader","tableStyle","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"book","updatedBooks"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["textInput",""],["pSortableColumn","title",2,"min-width","15rem"],["field","title"],["pSortableColumn","adquisition",2,"min-width","15rem"],["field","adquisition"],["pSortableColumn","year",2,"min-width","15rem"],["field","year"],["pSortableColumn","collection",2,"min-width","15rem"],["field","collection"],["pSortableColumn","copies",2,"min-width","15rem"],["field","copies"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],[1,"flex","align-items-center","justify-content-center"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Panel para actualizar datos o eliminar elementos"),t.k0s(),t.nrm(3,"p-toast"),t.j41(4,"p-table",2,3),t.DNE(6,zt,7,0,"ng-template",4),t.DNE(7,Ht,17,0,"ng-template",5),t.DNE(8,Qt,14,5,"ng-template",6),t.DNE(9,Zt,2,1,"ng-template",7),t.k0s()(),t.j41(10,"dashboard-modal-dialog",8),t.bIt("updatedBooks",function(l){return o.updateBooks(l)}),t.k0s()),2&s&&(t.R7$(4),t.Y8G("value",o.books)("rows",10)("paginator",!0)("globalFilterFields",t.lJ4(9,te))("showLoader",!0)("tableStyle",t.lJ4(10,ee))("rowHover",!0)("showCurrentPageReport",!0),t.R7$(6),t.Y8G("book",o.book))},dependencies:[_._f,p.Ei,f.S,d.XI,d.Tg,d.yc,g.y8,Kt],encapsulation:2})}return i})(),J=(()=>{class i{constructor(e){this.http=e,this.BASE_URL=j.M.BASE_URL}postLoan(e){return this.http.post(`${this.BASE_URL}/loans`,e).pipe((0,u.W)(s=>(0,m.u)(s)))}getBorrowedBooks(){return this.http.get(`${this.BASE_URL}/loans/get-borrowed-books`).pipe((0,u.W)(e=>(0,m.u)(e)))}updateLoan(e){e||(0,k.$)(()=>new Error("Se necesita un ID"));const s=new Date,o=s.getFullYear(),a=s.getMonth()+1,l=s.getDate(),Zi=[{path:"/DevolutionDate",op:"replace",value:`${o}-${a.toString().padStart(2,"0")}-${l.toString().padStart(2,"0")}`},{path:"/Returned",op:"replace",value:!0}];return this.http.patch(`${this.BASE_URL}/loans/${e}`,Zi).pipe((0,u.W)(ts=>(0,m.u)(ts)))}deleteLoan(e){return this.http.delete(`${this.BASE_URL}/loans/${e}`).pipe((0,u.W)(s=>(0,m.u)(s)))}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO(E.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var se=c(935);let oe=(()=>{class i{transform(e,...s){return"0001-01-01T00:00:00"===e?"S/F":new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"numeric",day:"numeric"})}static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275pipe=t.EJ8({name:"ZeroDate",type:i,pure:!0})}return i})();const ne=["dt"];function re(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",9)(1,"h5",10),t.EFF(2,"B\xfasqueda por t\xedtulo de la obra o por colecci\xf3n"),t.k0s(),t.j41(3,"span",11),t.nrm(4,"i",12),t.j41(5,"input",13,14),t.bIt("input",function(o){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilterGlobal(o,"contains"))}),t.k0s()()()}}function ae(i,r){1&i&&(t.j41(0,"tr")(1,"th",15),t.EFF(2,"ID de usuario"),t.nrm(3,"p-sortIcon",16),t.k0s(),t.j41(4,"th",17),t.EFF(5,"Autoriz\xf3"),t.nrm(6,"p-sortIcon",18),t.k0s(),t.j41(7,"th",19),t.EFF(8," Fecha y hora de pr\xe9stamos"),t.nrm(9,"p-sortIcon",20),t.k0s(),t.j41(10,"th",21),t.EFF(11," Fecha devoluci\xf3n"),t.nrm(12,"p-sortIcon",22),t.k0s(),t.j41(13,"th",23),t.EFF(14,"Estatus"),t.nrm(15,"p-sortIcon",24),t.k0s(),t.j41(16,"th"),t.EFF(17,"Acciones"),t.k0s()())}function le(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"ZeroDate"),t.k0s(),t.j41(11,"td"),t.nrm(12,"p-tag",25),t.k0s(),t.j41(13,"td")(14,"button",26),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onUpdateLoan(null==a?null:a.id))}),t.k0s(),t.j41(15,"button",27),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onDeleteLoan(null==a?null:a.id))}),t.k0s()()()}if(2&i){const e=r.$implicit,s=t.XpG();t.R7$(2),t.JRh(e.userId),t.R7$(2),t.JRh(e.userName),t.R7$(2),t.JRh(t.i5U(7,7,e.loanDate,"short")),t.R7$(3),t.JRh(t.bMT(10,10,e.devolutionDate)),t.R7$(3),t.Y8G("value",!0===e.returned?"Devuelto":"Sin devolver")("severity",s.getSeverity(e.returned)),t.R7$(2),t.Y8G("disabled",null==e?null:e.returned)}}function pe(i,r){if(1&i&&(t.j41(0,"div",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI(" Hay un total de ",e.loans?e.loans.length:0," registros en la base de datos ")}}const ce=function(){return["userName"]},ue=function(){return{"min-width":"75rem"}},me=function(){return{width:"450px"}};let de=(()=>{class i{constructor(e,s,o,a){this.utilitiesService=e,this.loansService=s,this.messageService=o,this.confirmationService=a,this.loans=[]}ngOnInit(){this.loansService.getBorrowedBooks().subscribe(e=>this.loans=e),this.utilitiesService.setVisibility(!1)}onUpdateLoan(e){this.confirmationService.confirm({message:"\xbfEst\xe1s deguro de finalizar el pr\xe9stamo?",header:"Confirmar acci\xf3n",icon:"pi pi-check-circle",accept:()=>{this.loansService.updateLoan(e).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Se actualiz\xf3 la informaci\xf3n",life:3e3}),this.loansService.getBorrowedBooks().subscribe(s=>this.loans=s)},error:s=>{this.messageService.add({severity:"error",summary:"Error",detail:`${s}`,life:3e3})}})}})}onDeleteLoan(e){this.confirmationService.confirm({message:"\xbfEst\xe1s deguro de eliminar este registro?",header:"Confirmar acci\xf3n",icon:"pi pi-exclamation-triangle",accept:()=>{this.loansService.deleteLoan(e).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Se elimin\xf3 el registro",life:3e3})},error:s=>{this.messageService.add({severity:"error",summary:"Error",detail:`${s}`,life:3e3})}})}})}getSeverity(e){switch(e){case!0:return"success";case!1:return"danger"}}applyFilterGlobal(e,s){this.utilitiesService.filtering(e,s,this.dt)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(v),t.rXU(J),t.rXU(p.bg),t.rXU(p.td))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-loans-page"]],viewQuery:function(s,o){if(1&s&&t.GBs(ne,5),2&s){let a;t.mGM(a=t.lsd())&&(o.dt=a.first)}},decls:12,vars:16,consts:[[1,"card","surface-section","py-6","px-4"],[1,"font-medium","text-primary"],["dataKey","id","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas",3,"value","rows","paginator","globalFilterFields","showLoader","tableStyle","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"rejectButtonStyleClass","acceptLabel","rejectLabel"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["textInput",""],["pSortableColumn","user",2,"min-width","15rem"],["field","user"],["pSortableColumn","account",2,"min-width","15rem"],["field","account"],["pSortableColumn","loanDate",2,"min-width","15rem"],["field","loanDate"],["pSortableColumn","devolutionDate",2,"min-width","15rem"],["field","devolutionDate"],["pSortableColumn","returned",2,"min-width","15rem"],["field","returned"],[3,"value","severity"],["tooltipPosition","left","pTooltip","Finalizar pr\xe9stamo","pButton","","pRipple","","icon","pi pi-check-square",1,"p-button-rounded","p-button-success","mr-2",3,"disabled","click"],["tooltipPosition","left","pTooltip","Eliminar registro","pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],[1,"flex","align-items-center","justify-content-center"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Panel para actualizar o eliminar pr\xe9stamos:"),t.k0s(),t.nrm(3,"p-toast"),t.j41(4,"p-table",2,3),t.DNE(6,re,7,0,"ng-template",4),t.DNE(7,ae,18,0,"ng-template",5),t.DNE(8,le,16,12,"ng-template",6),t.DNE(9,pe,2,1,"ng-template",7),t.k0s()(),t.nrm(10,"p-confirmDialog",8)(11,"p-toast")),2&s&&(t.R7$(4),t.Y8G("value",o.loans)("rows",10)("paginator",!0)("globalFilterFields",t.lJ4(13,ce))("showLoader",!0)("tableStyle",t.lJ4(14,ue))("rowHover",!0)("showCurrentPageReport",!0),t.R7$(6),t.Aen(t.lJ4(15,me)),t.Y8G("rejectButtonStyleClass","p-button-outlined")("acceptLabel","Aceptar")("rejectLabel","Cancelar"))},dependencies:[_._f,p.Ei,w.T,f.S,D.m,d.XI,d.Tg,d.yc,se.v,g.y8,h.vh,oe],encapsulation:2})}return i})(),R=(()=>{class i{constructor(e){this.http=e,this.BASE_URL=j.M.BASE_URL}postUser(e){return this.http.post(`${this.BASE_URL}/users`,e).pipe((0,u.W)(s=>(0,m.u)(s)))}getStudents(){return this.http.get(`${this.BASE_URL}/users/students`).pipe((0,u.W)(e=>(0,m.u)(e)))}getProfessors(){return this.http.get(`${this.BASE_URL}/users/professors`).pipe((0,u.W)(e=>(0,m.u)(e)))}getAdministratives(){return this.http.get(`${this.BASE_URL}/users/administratives`).pipe((0,u.W)(e=>(0,m.u)(e)))}getAllUsers(){return this.http.get(`${this.BASE_URL}/users/users`).pipe((0,u.W)(e=>(0,m.u)(e)))}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO(E.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var he=c(6296),N=c(5901);const U=function(){return{width:"100%"}};let ge=(()=>{class i{constructor(e,s,o,a,l){this.fb=e,this.booksService=s,this.usersService=o,this.loansService=a,this.messageService=l,this.isStudent=null,this.isEmployee=null,this.loanForm=this.fb.group({type:[null,[n.k0.required]],selectedUser:[{value:null,disabled:!0},[n.k0.required]],selectedBooks:[{value:null,disabled:!0},[n.k0.required,n.k0.minLength(1)]]}),this.user=[],this.books=[],this.loading=!1,this.userTypes=[{name:"Estudiante",value:1},{name:"Maestro",value:2}]}ngOnInit(){this.booksService.getBooks().subscribe(e=>this.books=e)}selectedOption(e){this.lastOptionSelected=e,this.isStudent=1===this.lastOptionSelected?.option?.value,this.isEmployee=2===this.lastOptionSelected?.option?.value,this.isStudent?this.usersService.getStudents().subscribe(s=>{this.user=s,this.loanForm.get("selectedUser")?.enable()}):this.usersService.getProfessors().subscribe(s=>{this.user=s,this.loanForm.get("selectedUser")?.enable()}),this.loanForm.updateValueAndValidity()}selectedBooks(e){console.log(e.value.length),e?.value.length>0&&this.loanForm.get("selectedBooks")?.enable(),this.loanForm.updateValueAndValidity()}onNewLoan(){const{selectedUser:e,selectedBooks:s}=this.loanForm.value,l={userId:e[0].id,borrowedBooks:s.map(I=>I.adquisition)};(null==e||null==s)&&(0,k.$)(()=>"Los valores no pueden ser nulos"),this.loading=!0,this.loansService.postLoan(l).subscribe({next:()=>{this.messageService.add({summary:"\xc9xito",severity:"success",detail:"Pr\xe9stamo registrado"}),this.loading=!1},error:I=>{this.messageService.add({summary:"Error",severity:"error",detail:`${I}`}),this.loading=!1}})}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(x),t.rXU(R),t.rXU(J),t.rXU(p.bg))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-new-loan-page"]],decls:18,vars:19,consts:[[1,"flex","flex-column","align-items-center","surface-section","py-6","px-4",3,"formGroup","ngSubmit"],[1,"text-primary","mt-4","ml-2"],[1,"mt-5"],["formControlName","type","optionLabel","name","optionValue","value",3,"options","multiple","onOptionClick"],[1,"w-full","sm:w-6"],[1,"p-float-label","mt-5"],["inputId","float-label","formControlName","selectedUser","optionLabel","name",3,"options","virtualScroll","virtualScrollItemSize","onChange"],["for","float-label"],["display","chip","inputId","float-label","formControlName","selectedBooks","optionLabel","title",3,"selectionLimit","options","virtualScroll","virtualScrollItemSize"],[1,"flex","w-full","flex-column","sm:w-6"],[3,"isLoading","label","invalid"],["position","top-center"]],template:function(s,o){1&s&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return o.onNewLoan()}),t.j41(1,"p",1),t.EFF(2,"Registra un pr\xe9stamo de libro por tipo de usuario. M\xe1ximo tres ejemplares."),t.k0s(),t.j41(3,"div",2)(4,"p-selectButton",3),t.bIt("onOptionClick",function(l){return o.selectedOption(l)}),t.k0s()(),t.j41(5,"div",4)(6,"div",5)(7,"p-multiSelect",6),t.bIt("onChange",function(l){return o.selectedBooks(l)}),t.k0s(),t.j41(8,"label",7),t.EFF(9,"Seleccione al usuario"),t.k0s()()(),t.j41(10,"div",4)(11,"div",5),t.nrm(12,"p-multiSelect",8),t.j41(13,"label",7),t.EFF(14,"Seleccionar los libros"),t.k0s()()(),t.j41(15,"div",9),t.nrm(16,"dashboard-add-button",10),t.k0s(),t.nrm(17,"p-toast",11),t.k0s()),2&s&&(t.Y8G("formGroup",o.loanForm),t.R7$(4),t.Y8G("options",o.userTypes)("multiple",!1),t.R7$(3),t.Aen(t.lJ4(17,U)),t.Y8G("options",o.user)("virtualScroll",!0)("virtualScrollItemSize",20),t.R7$(5),t.Aen(t.lJ4(18,U)),t.Y8G("selectionLimit",3)("options",o.books)("virtualScroll",!0)("virtualScrollItemSize",40),t.R7$(4),t.Y8G("isLoading",o.loading)("label","Crear pr\xe9stamo")("invalid",o.loanForm.invalid))},dependencies:[n.qT,n.BC,n.cb,n.j4,n.JD,he.KF,N.JC,g.y8,y],encapsulation:2})}return i})(),P=(()=>{class i{constructor(e){this.http=e,this.baseUrl=j.M.BASE_URL}getPublications(){return this.http.get(`${this.baseUrl}/publications`)}postPublication(e){return null===e?(0,k.$)(()=>new Error("Valores incorrectos")):this.http.post(`${this.baseUrl}/publications`,e).pipe((0,u.W)(s=>(0,m.u)(s)))}updatePublication(e,s){return void 0===e||null===s?(0,k.$)(()=>new Error("Valores incorrectos")):this.http.put(`${this.baseUrl}/Publications/${e}`,s).pipe((0,u.W)(o=>(0,m.u)(o)))}deletePublication(e){return null===e?(0,k.$)(()=>new Error(`${e} no es un Id v\xe1lido`)):this.http.delete(`${this.baseUrl}/publications/${e}`).pipe((0,u.W)(s=>(0,m.u)(s)))}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO(E.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function fe(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("type"))}}function _e(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("title"))}}function Fe(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("author"))}}function be(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("authorTwo"))}}function ke(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("authorThree"))}}function ve(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("authorFour"))}}function Ee(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("publisher"))}}function ye(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("isbn"))}}function je(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("issn"))}}function Re(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("year"))}}function xe(i,r){if(1&i&&(t.j41(0,"small",31),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("vol"))}}let Te=(()=>{class i{constructor(e,s,o){this.fb=e,this.messageService=s,this.publicationService=o,this.loading=!1,this.publicationTypes=[{name:"Art\xedculo",value:1},{name:"Publicaci\xf3n",value:2},{name:"Revista",value:3}],this.form=this.fb.group({type:[null,[n.k0.required]],title:["",[n.k0.required,n.k0.maxLength(150)]],author:["",[n.k0.required,n.k0.maxLength(120),n.k0.minLength(5)]],authorTwo:["",[n.k0.maxLength(120),n.k0.minLength(5)]],authorThree:["",[n.k0.maxLength(120),n.k0.minLength(5)]],authorFour:["",[n.k0.maxLength(120),n.k0.minLength(5)]],publisher:["",[n.k0.required,n.k0.maxLength(50)]],isbn:["",[n.k0.maxLength(16),n.k0.minLength(16)]],issn:["",[n.k0.maxLength(9),n.k0.minLength(9)]],year:[null,[n.k0.required,n.k0.maxLength(4),n.k0.minLength(4)]],vol:["",[n.k0.required,n.k0.maxLength(10)]]})}onSave(){this.form.invalid||"number"!=typeof this.form.value.type?this.form.markAllAsTouched():(this.loading=!0,this.publicationService.postPublication(this.form.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Publicaci\xf3n agregada correctamente"}),this.loading=!1,this.form.reset()},error:e=>{this.messageService.add({severity:"error",summary:"Ups",detail:`${e}`}),this.loading=!1}}))}isValidField(e){return F(e,this.form)}displayError(e){return b(e,this.form)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(p.bg),t.rXU(P))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-add-publication-page"]],decls:75,vars:16,consts:[[1,"card","surface-section","p-6"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"font-medium","text-center","sm:text-left","text-primary"],["formControlName","type","optionLabel","name","optionValue","value",3,"options","multiple"],["class","ml-2 text-red-500",4,"ngIf"],[1,"formgrid","grid"],[1,"field","col-12","sm:col-6"],[1,"p-float-label","mt-5"],["required","","formControlName","title","type","text","pInputText","","id","title",1,"w-full"],["htmlFor","title"],["required","","formControlName","author","type","text","pInputText","","id","author",1,"w-full"],["htmlFor","author"],["formControlName","authorTwo","type","text","pInputText","","id","authorTwo",1,"w-full"],["htmlFor","authorTwo"],["formControlName","authorThree","type","text","pInputText","","id","authorThree",1,"w-full"],["htmlFor","authorThree"],["formControlName","authorFour","type","text","pInputText","","id","authorFour",1,"w-full"],["htmlFor","authorFour"],["formControlName","publisher","type","text","pInputText","","id","publisher",1,"w-full"],["htmlFor","publisher"],["formControlName","isbn","type","text","pInputText","","id","isbn",1,"w-full"],["htmlFor","isbn"],["formControlName","issn","type","text","pInputText","","id","issn",1,"w-full"],["htmlFor","issn"],["required","","formControlName","year","type","year","pInputText","","id","year",1,"w-full"],["htmlFor","year"],["required","","formControlName","vol","type","vol","pInputText","","id","vol",1,"w-full"],["htmlFor","vol"],[1,"flex","w-full","flex-column","sm:w-6"],[3,"isLoading","invalid"],["position","top-center"],[1,"ml-2","text-red-500"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return o.onSave()}),t.j41(2,"p",2),t.EFF(3," Agrega una nueva publicaci\xf3n a la colecci\xf3n, seleccionando por tipo "),t.k0s(),t.j41(4,"div"),t.nrm(5,"p-selectButton",3),t.DNE(6,fe,2,1,"small",4),t.k0s(),t.j41(7,"div",5)(8,"div",6)(9,"div",7),t.nrm(10,"input",8),t.j41(11,"label",9),t.EFF(12,"T\xedtulo de la publicaci\xf3n"),t.k0s()(),t.DNE(13,_e,2,1,"small",4),t.k0s(),t.j41(14,"div",6)(15,"div",7),t.nrm(16,"input",10),t.j41(17,"label",11),t.EFF(18,"Nombre del primer autor"),t.k0s()(),t.DNE(19,Fe,2,1,"small",4),t.k0s()(),t.j41(20,"div",5)(21,"div",6)(22,"div",7),t.nrm(23,"input",12),t.j41(24,"label",13),t.EFF(25,"Nombre del segundo autor"),t.k0s()(),t.DNE(26,be,2,1,"small",4),t.k0s(),t.j41(27,"div",6)(28,"div",7),t.nrm(29,"input",14),t.j41(30,"label",15),t.EFF(31,"Nombre del tercer autor"),t.k0s()(),t.DNE(32,ke,2,1,"small",4),t.k0s()(),t.j41(33,"div",5)(34,"div",6)(35,"div",7),t.nrm(36,"input",16),t.j41(37,"label",17),t.EFF(38,"Nombre del cuarto autor"),t.k0s()(),t.DNE(39,ve,2,1,"small",4),t.k0s(),t.j41(40,"div",6)(41,"div",7),t.nrm(42,"input",18),t.j41(43,"label",19),t.EFF(44,"Editorial"),t.k0s()(),t.DNE(45,Ee,2,1,"small",4),t.k0s()(),t.j41(46,"div",5)(47,"div",6)(48,"div",7),t.nrm(49,"input",20),t.j41(50,"label",21),t.EFF(51,"ISBN"),t.k0s()(),t.DNE(52,ye,2,1,"small",4),t.k0s(),t.j41(53,"div",6)(54,"div",7),t.nrm(55,"input",22),t.j41(56,"label",23),t.EFF(57,"ISSN"),t.k0s()(),t.DNE(58,je,2,1,"small",4),t.k0s()(),t.j41(59,"div",5)(60,"div",6)(61,"div",7),t.nrm(62,"input",24),t.j41(63,"label",25),t.EFF(64,"A\xf1o"),t.k0s()(),t.DNE(65,Re,2,1,"small",4),t.k0s(),t.j41(66,"div",6)(67,"div",7),t.nrm(68,"input",26),t.j41(69,"label",27),t.EFF(70,"Vol\xfamen"),t.k0s()(),t.DNE(71,xe,2,1,"small",4),t.k0s()(),t.j41(72,"div",28),t.nrm(73,"dashboard-add-button",29),t.k0s(),t.nrm(74,"p-toast",30),t.k0s()()),2&s&&(t.R7$(1),t.Y8G("formGroup",o.form),t.R7$(4),t.Y8G("options",o.publicationTypes)("multiple",!1),t.R7$(1),t.Y8G("ngIf",o.isValidField("type")),t.R7$(7),t.Y8G("ngIf",o.isValidField("title")),t.R7$(6),t.Y8G("ngIf",o.isValidField("author")),t.R7$(7),t.Y8G("ngIf",o.isValidField("authorTwo")),t.R7$(6),t.Y8G("ngIf",o.isValidField("authorThree")),t.R7$(7),t.Y8G("ngIf",o.isValidField("authorFour")),t.R7$(6),t.Y8G("ngIf",o.isValidField("publisher")),t.R7$(7),t.Y8G("ngIf",o.isValidField("isbn")),t.R7$(6),t.Y8G("ngIf",o.isValidField("issn")),t.R7$(7),t.Y8G("ngIf",o.isValidField("year")),t.R7$(6),t.Y8G("ngIf",o.isValidField("vol")),t.R7$(2),t.Y8G("isLoading",o.loading)("invalid",o.form.invalid))},dependencies:[h.bT,n.qT,n.me,n.BC,n.cb,n.YS,n.j4,n.JD,f.S,N.JC,g.y8,y],encapsulation:2})}return i})();function Ce(i,r){if(1&i&&(t.j41(0,"small",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("type"))}}function Se(i,r){if(1&i&&(t.j41(0,"small",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("title"))}}function $e(i,r){if(1&i&&(t.j41(0,"small",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.SpI("",e.displayError("author")," ")}}function we(i,r){if(1&i&&(t.j41(0,"small",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.SpI("",e.displayError("publisher")," ")}}function Ne(i,r){if(1&i&&(t.j41(0,"small",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("year"))}}function Pe(i,r){if(1&i&&(t.j41(0,"small",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("isbn"))}}function Ie(i,r){if(1&i&&(t.j41(0,"small",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("issn"))}}function Ge(i,r){if(1&i&&(t.j41(0,"small",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("vol"))}}function Le(i,r){if(1&i&&(t.j41(0,"form",3)(1,"div",4)(2,"label",5),t.EFF(3,"Tipo de publicaci\xf3n actual"),t.k0s(),t.nrm(4,"p-selectButton",6),t.DNE(5,Ce,2,1,"small",7),t.k0s(),t.j41(6,"div",4)(7,"label",8),t.EFF(8,"T\xedtulo"),t.k0s(),t.nrm(9,"input",9),t.DNE(10,Se,2,1,"small",7),t.k0s(),t.j41(11,"div",4)(12,"label",10),t.EFF(13,"Autor"),t.k0s(),t.nrm(14,"input",11),t.DNE(15,$e,2,1,"small",7),t.k0s(),t.j41(16,"div",4)(17,"label",12),t.EFF(18,"Autor dos"),t.k0s(),t.nrm(19,"input",13),t.k0s(),t.j41(20,"div",4)(21,"label",14),t.EFF(22,"Autor tres"),t.k0s(),t.nrm(23,"input",15),t.k0s(),t.j41(24,"div",4)(25,"label",16),t.EFF(26,"Autor cuatro"),t.k0s(),t.nrm(27,"input",17),t.k0s(),t.j41(28,"div",4)(29,"label",18),t.EFF(30,"Editorial"),t.k0s(),t.nrm(31,"input",19),t.DNE(32,we,2,1,"small",7),t.k0s(),t.j41(33,"div",4)(34,"label",20),t.EFF(35,"A\xf1o"),t.k0s(),t.nrm(36,"input",21),t.DNE(37,Ne,2,1,"small",7),t.k0s(),t.j41(38,"div",4)(39,"label",22),t.EFF(40,"ISBN"),t.k0s(),t.nrm(41,"input",23),t.DNE(42,Pe,2,1,"small",7),t.k0s(),t.j41(43,"div",4)(44,"label",24),t.EFF(45,"ISSN"),t.k0s(),t.nrm(46,"input",25),t.DNE(47,Ie,2,1,"small",7),t.k0s(),t.j41(48,"div",4)(49,"label",26),t.EFF(50,"Vol\xfamen"),t.k0s(),t.nrm(51,"input",27),t.DNE(52,Ge,2,1,"small",7),t.k0s()()),2&i){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(4),t.Y8G("options",e.publicationTypes)("multiple",!1),t.R7$(1),t.Y8G("ngIf",e.isValidField("type")),t.R7$(5),t.Y8G("ngIf",e.isValidField("title")),t.R7$(5),t.Y8G("ngIf",e.isValidField("author")),t.R7$(17),t.Y8G("ngIf",e.isValidField("publisher")),t.R7$(5),t.Y8G("ngIf",e.isValidField("year")),t.R7$(5),t.Y8G("ngIf",e.isValidField("isbn")),t.R7$(5),t.Y8G("ngIf",e.isValidField("issn")),t.R7$(5),t.Y8G("ngIf",e.isValidField("vol"))}}function Ae(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",29),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.hideDialog())}),t.k0s(),t.j41(1,"button",30),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.save())}),t.k0s()}}const Y=function(){return{width:"450px"}};let Be=(()=>{class i{ngOnInit(){this.utilitiesService.isVisible$.subscribe(e=>{this.isVisible=e})}ngOnChanges(e){e.publication&&this.patchFormValues()}constructor(e,s,o,a){this.fb=e,this.messageService=s,this.publicationService=o,this.utilitiesService=a,this.updatedList=new t.bkB,this.isVisible=!1,this.publicationTypes=[{name:"Art\xedculo",value:1},{name:"Publicaci\xf3n",value:2},{name:"Revista",value:3}],this.form=this.fb.group({type:[null,[n.k0.required]],title:["",[n.k0.required,n.k0.maxLength(150)]],author:["",[n.k0.required,n.k0.maxLength(120),n.k0.minLength(5)]],authorTwo:["",[n.k0.maxLength(120),n.k0.minLength(5)]],authorThree:["",[n.k0.maxLength(120),n.k0.minLength(5)]],authorFour:["",[n.k0.maxLength(120),n.k0.minLength(5)]],publisher:["",[n.k0.required,n.k0.maxLength(50)]],isbn:["",[n.k0.maxLength(16),n.k0.minLength(16)]],issn:["",[n.k0.maxLength(9),n.k0.minLength(9)]],year:[null,[n.k0.required,n.k0.maxLength(4),n.k0.minLength(4)]],vol:["",[n.k0.required,n.k0.maxLength(10)]]})}hideDialog(){this.isVisible=!1}save(){this.form.invalid?this.form.markAllAsTouched():(this.publicationService.updatePublication(this.publication.id,this.form.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Se actualiz\xf3 el registro"}),this.publicationService.getPublications().subscribe(e=>this.updatedList.emit(e))},error:e=>{this.messageService.add({severity:"error",summary:"Ups!",detail:`${e}`})}}),this.isVisible=!1)}isValidField(e){return F(e,this.form)}displayError(e){return b(e,this.form)}patchFormValues(){this.publication&&this.form.patchValue(this.publication)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(p.bg),t.rXU(P),t.rXU(v))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["dashboard-modal-publication"]],inputs:{publication:"publication"},outputs:{updatedList:"updatedList"},features:[t.OA$],decls:4,vars:8,consts:[["header","Actualizar datos de publicaci\xf3n","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[3,"formGroup"],[1,"field"],["for","type"],["formControlName","type","optionLabel","name","optionValue","value",3,"options","multiple"],["class","ml-2 text-red-500",4,"ngIf"],["for","title"],["formControlName","title","type","text","pInputText","","id","title","required",""],["for","author"],["formControlName","author","type","text","pInputText","","id","author","required",""],["for","authorTwo"],["formControlName","authorTwo","type","text","pInputText","","id","authorTwo"],["for","authorThree"],["formControlName","authorThree","type","authorThree","pInputText","","id","authorThree"],["for","authorFour"],["formControlName","authorFour","type","authorFour","pInputText","","id","authorFour"],["for","publisher"],["formControlName","publisher","type","text","pInputText","","id","publisher","required",""],["for","year"],["formControlName","year","type","number","pInputText","","id","year","required",""],["for","isbn"],["formControlName","isbn","type","text","pInputText","","id","isbn","required",""],["for","issn"],["formControlName","issn","type","text","pInputText","","id","issn","required",""],["for","vol"],["formControlName","vol","type","text","pInputText","","id","vol","required",""],[1,"ml-2","text-red-500"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(s,o){1&s&&(t.j41(0,"p-dialog",0),t.bIt("visibleChange",function(l){return o.isVisible=l}),t.DNE(1,Le,53,11,"ng-template",1),t.DNE(2,Ae,2,0,"ng-template",2),t.k0s(),t.nrm(3,"p-confirmDialog")),2&s&&(t.Aen(t.lJ4(6,Y)),t.Y8G("visible",o.isVisible)("modal",!0),t.R7$(3),t.Aen(t.lJ4(7,Y)))},dependencies:[h.bT,n.qT,n.me,n.Q0,n.BC,n.cb,n.YS,n.j4,n.JD,_._f,p.Ei,w.T,L.l,f.S,N.JC],encapsulation:2})}return i})();const De=["dt"];function Ve(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",9)(1,"h5",10),t.EFF(2,"B\xfasqueda por t\xedtulo de la obra o por colecci\xf3n"),t.k0s(),t.j41(3,"span",11),t.nrm(4,"i",12),t.j41(5,"input",13,14),t.bIt("input",function(o){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilterGlobal(o,"contains"))}),t.k0s()()()}}function Xe(i,r){1&i&&(t.j41(0,"tr")(1,"th",15),t.EFF(2,"T\xedtulo"),t.nrm(3,"p-sortIcon",16),t.k0s(),t.j41(4,"th",17),t.EFF(5," Autor"),t.nrm(6,"p-sortIcon",18),t.k0s(),t.j41(7,"th",19),t.EFF(8,"ISBN"),t.nrm(9,"p-sortIcon",20),t.k0s(),t.j41(10,"th",21),t.EFF(11,"ISSN"),t.nrm(12,"p-sortIcon",22),t.k0s(),t.j41(13,"th",23),t.EFF(14,"A\xf1o"),t.nrm(15,"p-sortIcon",24),t.k0s(),t.nrm(16,"th"),t.k0s())}function Je(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td")(12,"button",25),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.edit(a))}),t.k0s(),t.j41(13,"button",26),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.delete(a))}),t.k0s()()()}if(2&i){const e=r.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(2),t.JRh(e.author),t.R7$(2),t.JRh(e.isbn),t.R7$(2),t.JRh(e.issn),t.R7$(2),t.JRh(e.year)}}function Ue(i,r){if(1&i&&(t.j41(0,"div",27),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI(" Hay un total de ",e.publicationList?e.publicationList.length:0," publicaciones registradas ")}}const Ye=function(){return["title","collection"]},qe=function(){return{"min-width":"75rem"}};let Me=(()=>{class i{ngOnInit(){this.publicationService.getPublications().subscribe(e=>this.publicationList=e),this.utilitiesService.setVisibility(!1)}constructor(e,s,o,a){this.confirmationService=e,this.messageService=s,this.publicationService=o,this.utilitiesService=a,this.publicationList=[]}edit(e){this.utilitiesService.setVisibility(!0),this.publication=e}delete(e){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de eliminar: "+e.title+"?",header:"Confirmar acci\xf3n",icon:"pi pi-exclamation-triangle",accept:()=>{this.publicationService.deletePublication(e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Publicaci\xf3n eliminada",life:3e3}),this.publicationList=this.publicationList.filter(s=>s.id!==e.id)},error:s=>{this.messageService.add({severity:"error",summary:"Error",detail:`${s}`,life:3e3})}})}})}updatePublication(e){this.publicationList=e}applyFilterGlobal(e,s){this.utilitiesService.filtering(e,s,this.dt)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(p.td),t.rXU(p.bg),t.rXU(P),t.rXU(v))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["dashboard-edit-publication-page"]],viewQuery:function(s,o){if(1&s&&t.GBs(De,5),2&s){let a;t.mGM(a=t.lsd())&&(o.dt=a.first)}},decls:11,vars:11,consts:[[1,"card","surface-section","py-6","px-4"],[1,"font-medium","text-primary"],["dataKey","id","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas",3,"value","rows","paginator","globalFilterFields","showLoader","tableStyle","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"publication","updatedList"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["textInput",""],["pSortableColumn","title",2,"min-width","15rem"],["field","title"],["pSortableColumn","adquisition",2,"min-width","15rem"],["field","adquisition"],["pSortableColumn","year",2,"min-width","15rem"],["field","year"],["pSortableColumn","collection",2,"min-width","15rem"],["field","collection"],["pSortableColumn","copies",2,"min-width","15rem"],["field","copies"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],[1,"flex","align-items-center","justify-content-center"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Panel para actualizar datos o eliminar elementos"),t.k0s(),t.nrm(3,"p-toast"),t.j41(4,"p-table",2,3),t.DNE(6,Ve,7,0,"ng-template",4),t.DNE(7,Xe,17,0,"ng-template",5),t.DNE(8,Je,14,5,"ng-template",6),t.DNE(9,Ue,2,1,"ng-template",7),t.k0s()(),t.j41(10,"dashboard-modal-publication",8),t.bIt("updatedList",function(l){return o.updatePublication(l)}),t.k0s()),2&s&&(t.R7$(4),t.Y8G("value",o.publicationList)("rows",10)("paginator",!0)("globalFilterFields",t.lJ4(9,Ye))("showLoader",!0)("tableStyle",t.lJ4(10,qe))("rowHover",!0)("showCurrentPageReport",!0),t.R7$(6),t.Y8G("publication",o.publication))},dependencies:[_._f,p.Ei,f.S,d.XI,d.Tg,d.yc,g.y8,Be],encapsulation:2})}return i})();function Oe(i,r){1&i&&(t.j41(0,"tr")(1,"th",5),t.EFF(2,"T\xedtulo"),t.k0s(),t.j41(3,"th",5),t.EFF(4,"Autor principal"),t.k0s(),t.j41(5,"th",5),t.EFF(6,"Editorial"),t.k0s(),t.j41(7,"th",5),t.EFF(8,"A\xf1o"),t.k0s(),t.j41(9,"th",5),t.EFF(10,"ISBN"),t.k0s(),t.j41(11,"th",5),t.EFF(12,"ISSN"),t.k0s(),t.j41(13,"th",5),t.EFF(14,"Vol\xfamen"),t.k0s()())}function Ke(i,r){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s()()),2&i){const e=r.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(2),t.JRh(e.author),t.R7$(2),t.JRh(e.publisher),t.R7$(2),t.JRh(e.year),t.R7$(2),t.JRh(e.isbn),t.R7$(2),t.JRh(e.issn),t.R7$(2),t.JRh(e.vol)}}const We=function(){return{"min-width":"50rem"}},ze=function(){return[10,20]};let He=(()=>{class i{ngOnInit(){this.getPublications()}constructor(e){this.publicationService=e,this.publications=[]}getPublications(){this.publicationService.getPublications().subscribe(e=>this.publications=e)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(P))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-publications-page"]],decls:6,vars:8,consts:[[1,"card","surface-section","py-6","px-4"],[1,"font-medium","text-primary"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas","paginatorLocale","es-Es",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[2,"width","10%"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Inventario de publicaciones dadas de alta"),t.k0s(),t.j41(3,"p-table",2),t.DNE(4,Oe,15,0,"ng-template",3),t.DNE(5,Ke,15,7,"ng-template",4),t.k0s()()),2&s&&(t.R7$(3),t.Y8G("value",o.publications)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.lJ4(6,We))("rowsPerPageOptions",t.lJ4(7,ze)))},dependencies:[p.Ei,d.XI],encapsulation:2})}return i})();function Qe(i,r){if(1&i&&(t.j41(0,"small",19),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("type"))}}function Ze(i,r){if(1&i&&(t.j41(0,"small",19),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("name"))}}function ti(i,r){if(1&i&&(t.j41(0,"small",19),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("secondName"))}}function ei(i,r){if(1&i&&(t.j41(0,"small",19),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("lastName"))}}function ii(i,r){if(1&i&&(t.j41(0,"small",19),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("motherName"))}}function si(i,r){if(1&i&&(t.j41(0,"small",19),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("enrollmentNum"))}}function oi(i,r){if(1&i&&(t.j41(0,"div",2)(1,"div",7),t.nrm(2,"input",20),t.j41(3,"label",21),t.EFF(4,"Matr\xedcula"),t.k0s()(),t.DNE(5,si,2,1,"small",5),t.k0s()),2&i){const e=t.XpG();t.R7$(5),t.Y8G("ngIf",e.isValidField("enrollmentNum"))}}function ni(i,r){if(1&i&&(t.j41(0,"small",19),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("employeeKey"))}}function ri(i,r){if(1&i&&(t.j41(0,"div",2)(1,"div",7),t.nrm(2,"input",22),t.j41(3,"label",23),t.EFF(4,"N\xfamero de empleado"),t.k0s()(),t.DNE(5,ni,2,1,"small",5),t.k0s()),2&i){const e=t.XpG();t.R7$(5),t.Y8G("ngIf",e.isValidField("employeeKey"))}}function ai(i,r){if(1&i&&(t.j41(0,"small",19),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("address"))}}function li(i,r){if(1&i&&(t.j41(0,"div",2)(1,"div",7),t.nrm(2,"input",24),t.j41(3,"label",25),t.EFF(4,"Direcci\xf3n"),t.k0s()(),t.DNE(5,ai,2,1,"small",5),t.k0s()),2&i){const e=t.XpG();t.R7$(5),t.Y8G("ngIf",e.isValidField("address"))}}let pi=(()=>{class i{constructor(e,s,o){this.fb=e,this.usersService=s,this.messageService=o,this.registerForm=this.fb.group({type:[null,n.k0.required],name:["",[n.k0.required,n.k0.maxLength(40),n.k0.minLength(3)]],secondName:["",[n.k0.maxLength(60)]],lastName:["",[n.k0.required,n.k0.maxLength(60),n.k0.minLength(3)]],motherName:["",[n.k0.required,n.k0.maxLength(60),n.k0.minLength(3)]],enrollmentNum:[null,[n.k0.maxLength(8)]],employeeKey:[null,[n.k0.maxLength(10)]],address:["",[n.k0.maxLength(120)]]}),this.loading=!1,this.userTypes=[{name:"Estudiante",value:1},{name:"Maestro",value:2},{name:"Administrativo",value:3}]}selectedOption(e){this.lastOptionSelected=e,this.isStudent=1===this.lastOptionSelected?.option?.value,this.isEmployee=2===this.lastOptionSelected?.option?.value||3===this.lastOptionSelected?.option?.value,this.isStudent&&this.registerForm.get("enrollmentNum")?.setValidators([n.k0.required,n.k0.maxLength(8),n.k0.minLength(8)]),this.isEmployee&&this.registerForm.get("employeeKey")?.setValidators([n.k0.required,n.k0.maxLength(10),n.k0.minLength(8)]),this.registerForm.updateValueAndValidity()}onSave(){this.registerForm.invalid?this.registerForm.markAllAsTouched():(this.loading=!0,this.usersService.postUser(this.registerForm.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Usuario registrado"}),this.loading=!1,this.registerForm.reset()},error:e=>{this.messageService.add({severity:"error",summary:"Ups",detail:`${e}`}),this.loading=!1}}))}isValidField(e){return F(e,this.registerForm)}displayError(e){return b(e,this.registerForm)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(R),t.rXU(p.bg))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-register-page"]],decls:37,vars:14,consts:[["autocomplete","off",1,"surface-section","py-6","px-4","justify-content-center",3,"formGroup","ngSubmit"],[1,"font-medium","text-primary"],[1,"w-full","sm:w-auto"],[1,"mt-5"],["formControlName","type","optionLabel","name","optionValue","value",3,"options","multiple","onOptionClick"],["class","ml-2 text-red-500",4,"ngIf"],[1,"formgrid","grid","justify-content-center","sm:justify-content-start"],[1,"p-float-label","mt-5"],["required","","formControlName","name","type","text","pInputText","","id","name",1,"mx-2","w-full","sm:w-auto"],["htmlFor","name"],["formControlName","secondName","type","text","pInputText","","id","secondName",1,"mx-2","w-full","sm:w-auto"],["htmlFor","secondName"],["formControlName","lastName","type","text","pInputText","","id","lastName",1,"mx-2","w-full","sm:w-auto"],["htmlFor","lastName"],["formControlName","motherName","type","text","pInputText","","id","motherName",1,"mx-2","w-full","sm:w-auto"],["htmlFor","motherName"],["class","w-full sm:w-auto",4,"ngIf"],[3,"label","invalid","isLoading"],["position","top-center"],[1,"ml-2","text-red-500"],["formControlName","enrollmentNum","type","text","pInputText","","id","enrollmentNum",1,"mx-2","w-full","sm:w-auto"],["htmlFor","enrollmentNum"],["formControlName","employeeKey","type","text","pInputText","","id","employeeKey",1,"mx-2","w-full","sm:w-auto"],["htmlFor","employeeKey"],["formControlName","address","type","text","pInputText","","id","address",1,"mx-2","w-full","sm:w-auto"],["htmlFor","address"]],template:function(s,o){1&s&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return o.onSave()}),t.j41(1,"p",1),t.EFF(2,"Da de alta a un nuevo usuario, seleccionando por tipo:"),t.k0s(),t.j41(3,"div",2)(4,"div",3)(5,"p-selectButton",4),t.bIt("onOptionClick",function(l){return o.selectedOption(l)}),t.k0s()(),t.DNE(6,Qe,2,1,"small",5),t.k0s(),t.j41(7,"div",6)(8,"div",2)(9,"div",7),t.nrm(10,"input",8),t.j41(11,"label",9),t.EFF(12,"Nombre"),t.k0s()(),t.DNE(13,Ze,2,1,"small",5),t.k0s(),t.j41(14,"div",2)(15,"div",7),t.nrm(16,"input",10),t.j41(17,"label",11),t.EFF(18,"Segundo nombre"),t.k0s()(),t.DNE(19,ti,2,1,"small",5),t.k0s(),t.j41(20,"div",2)(21,"div",7),t.nrm(22,"input",12),t.j41(23,"label",13),t.EFF(24,"Apellido"),t.k0s()(),t.DNE(25,ei,2,1,"small",5),t.k0s(),t.j41(26,"div",2)(27,"div",7),t.nrm(28,"input",14),t.j41(29,"label",15),t.EFF(30,"Apellido materno"),t.k0s()(),t.DNE(31,ii,2,1,"small",5),t.k0s(),t.DNE(32,oi,6,1,"div",16),t.DNE(33,ri,6,1,"div",16),t.DNE(34,li,6,1,"div",16),t.k0s(),t.nrm(35,"dashboard-add-button",17)(36,"p-toast",18),t.k0s()),2&s&&(t.Y8G("formGroup",o.registerForm),t.R7$(5),t.Y8G("options",o.userTypes)("multiple",!1),t.R7$(1),t.Y8G("ngIf",o.isValidField("type")),t.R7$(7),t.Y8G("ngIf",o.isValidField("name")),t.R7$(6),t.Y8G("ngIf",o.isValidField("secondName")),t.R7$(6),t.Y8G("ngIf",o.isValidField("lastName")),t.R7$(6),t.Y8G("ngIf",o.isValidField("motherName")),t.R7$(1),t.Y8G("ngIf",o.isStudent),t.R7$(1),t.Y8G("ngIf",o.isEmployee),t.R7$(1),t.Y8G("ngIf",o.isStudent),t.R7$(1),t.Y8G("label","Crear usuario")("invalid",o.registerForm.invalid)("isLoading",o.loading))},dependencies:[h.bT,n.qT,n.me,n.BC,n.cb,n.YS,n.j4,n.JD,f.S,N.JC,g.y8,y],encapsulation:2})}return i})();function ci(i,r){1&i&&(t.j41(0,"tr")(1,"th",5),t.EFF(2,"Nombre"),t.k0s(),t.j41(3,"th",5),t.EFF(4,"Segundo nombre"),t.k0s(),t.j41(5,"th",5),t.EFF(6,"Apellido"),t.k0s(),t.j41(7,"th",5),t.EFF(8,"Apellido materno"),t.k0s(),t.j41(9,"th",5),t.EFF(10,"Num. de empleado"),t.k0s()())}function ui(i,r){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s()()),2&i){const e=r.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.secondName),t.R7$(2),t.JRh(e.lastName),t.R7$(2),t.JRh(e.motherName),t.R7$(2),t.JRh(e.employeeKey)}}const mi=function(){return{"min-width":"50rem"}},di=function(){return[10,20]};let hi=(()=>{class i{constructor(e){this.usersService=e}ngOnInit(){this.getAdministrativesList()}getAdministrativesList(){this.usersService.getAdministratives().subscribe(e=>this.administratives=e)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(R))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-registered-administratives-page"]],decls:6,vars:8,consts:[[1,"card","surface-section","py-6","px-4"],[1,"text-primary","ml-2","mt-4"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas","paginatorLocale","es-Es",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[2,"width","20%"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Lista de administrativos registrados:"),t.k0s(),t.j41(3,"p-table",2),t.DNE(4,ci,11,0,"ng-template",3),t.DNE(5,ui,11,5,"ng-template",4),t.k0s()()),2&s&&(t.R7$(3),t.Y8G("value",o.administratives)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.lJ4(6,mi))("rowsPerPageOptions",t.lJ4(7,di)))},dependencies:[p.Ei,d.XI],encapsulation:2})}return i})();function gi(i,r){1&i&&(t.j41(0,"tr")(1,"th",5),t.EFF(2,"Nombre"),t.k0s(),t.j41(3,"th",5),t.EFF(4,"Segundo nombre"),t.k0s(),t.j41(5,"th",5),t.EFF(6,"Apellido"),t.k0s(),t.j41(7,"th",5),t.EFF(8,"Apellido materno"),t.k0s(),t.j41(9,"th",5),t.EFF(10,"Num. de empleado"),t.k0s()())}function fi(i,r){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s()()),2&i){const e=r.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.secondName),t.R7$(2),t.JRh(e.lastName),t.R7$(2),t.JRh(e.motherName),t.R7$(2),t.JRh(e.employeeKey)}}const _i=function(){return{"min-width":"50rem"}},Fi=function(){return[10,20]};let bi=(()=>{class i{constructor(e){this.usersService=e}ngOnInit(){this.getProfessorsList()}getProfessorsList(){this.usersService.getProfessors().subscribe(e=>this.professors=e)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(R))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["dashboard-registered-professors-page"]],decls:6,vars:8,consts:[[1,"card","surface-section","py-6","px-4"],[1,"text-primary","ml-2","mt-4"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas","paginatorLocale","es-Es",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[2,"width","10%"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Lista de maestros registrados:"),t.k0s(),t.j41(3,"p-table",2),t.DNE(4,gi,11,0,"ng-template",3),t.DNE(5,fi,11,5,"ng-template",4),t.k0s()()),2&s&&(t.R7$(3),t.Y8G("value",o.professors)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.lJ4(6,_i))("rowsPerPageOptions",t.lJ4(7,Fi)))},dependencies:[p.Ei,d.XI],encapsulation:2})}return i})();function ki(i,r){1&i&&(t.j41(0,"tr")(1,"th",5),t.EFF(2,"Nombre"),t.k0s(),t.j41(3,"th",5),t.EFF(4,"Segundo nombre"),t.k0s(),t.j41(5,"th",5),t.EFF(6,"Apellido"),t.k0s(),t.j41(7,"th",5),t.EFF(8,"Apellido materno"),t.k0s(),t.j41(9,"th",5),t.EFF(10,"Matr\xedcula"),t.k0s(),t.j41(11,"th",6),t.EFF(12,"Direcci\xf3n"),t.k0s()())}function vi(i,r){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s()()),2&i){const e=r.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.secondName),t.R7$(2),t.JRh(e.lastName),t.R7$(2),t.JRh(e.motherName),t.R7$(2),t.JRh(e.enrollmentNum),t.R7$(2),t.JRh(e.address)}}const Ei=function(){return{"min-width":"50rem"}},yi=function(){return[10,20]};let ji=(()=>{class i{constructor(e){this.usersService=e}ngOnInit(){this.getStudentsList()}getStudentsList(){this.usersService.getStudents().subscribe(e=>this.students=e)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(R))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-registered-students-page"]],decls:6,vars:8,consts:[[1,"card","surface-section","py-6","px-4"],[1,"text-primary","ml-2","mt-4"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas","paginatorLocale","es-Es",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[2,"width","10%"],[2,"width","20%"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Lista de estudiantes registrados:"),t.k0s(),t.j41(3,"p-table",2),t.DNE(4,ki,13,0,"ng-template",3),t.DNE(5,vi,13,6,"ng-template",4),t.k0s()()),2&s&&(t.R7$(3),t.Y8G("value",o.students)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.lJ4(6,Ei))("rowsPerPageOptions",t.lJ4(7,yi)))},dependencies:[p.Ei,d.XI],encapsulation:2})}return i})(),T=(()=>{class i{constructor(e){this.http=e,this.baseUrl=j.M.BASE_URL}getThesis(){return this.http.get(`${this.baseUrl}/thesis`).pipe((0,u.W)(e=>(0,m.u)(e)))}postThesis(e){return this.http.post(`${this.baseUrl}/thesis`,e).pipe((0,u.W)(s=>(0,m.u)(s)))}deleteThesis(e){return this.http.delete(`${this.baseUrl}/thesis/${e}`).pipe((0,u.W)(s=>(0,m.u)(s)))}updateThesis(e,s){return this.http.put(`${this.baseUrl}/thesis/${e}`,s).pipe((0,u.W)(o=>(0,m.u)(o)))}static#t=this.\u0275fac=function(s){return new(s||i)(t.KVO(E.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}return i})();function Ri(i,r){if(1&i&&(t.j41(0,"small",22),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("title"))}}function xi(i,r){if(1&i&&(t.j41(0,"small",22),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("authorOne"))}}function Ti(i,r){if(1&i&&(t.j41(0,"small",22),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("assessor"))}}function Ci(i,r){if(1&i&&(t.j41(0,"small",22),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.displayError("year"))}}let Si=(()=>{class i{constructor(e,s,o){this.fb=e,this.thesisService=s,this.messageService=o,this.form=this.fb.group({title:["",[n.k0.required]],authorOne:["",[n.k0.required]],authorTwo:[""],authorThree:[""],assessor:["",[n.k0.required]],year:[null,[n.k0.required,n.k0.minLength(4),n.k0.maxLength(4)]]}),this.loading=!1}onSave(){this.form.invalid?this.form.markAllAsTouched():(this.loading=!0,this.thesisService.postThesis(this.form.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Tesis agregada correctamente"}),this.loading=!1,this.form.reset()},error:e=>{this.messageService.add({severity:"error",summary:"Ups",detail:`${e}`}),this.loading=!1}}))}isValidField(e){return F(e,this.form)}displayError(e){return b(e,this.form)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(T),t.rXU(p.bg))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-add-thesis-page"]],decls:44,vars:7,consts:[[1,"card","surface-section","p-6"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"font-medium","text-primary","text-center","sm:text-left"],[1,"formgrid","grid"],[1,"col-12","sm:col-6","field"],[1,"p-float-label","mt-5"],["required","","formControlName","title","type","text","pInputText","","id","title",1,"w-full"],["htmlFor","title"],["class","ml-2 text-red-500",4,"ngIf"],["required","","formControlName","authorOne","type","text","pInputText","","id","authorOne",1,"w-full"],["htmlFor","authorOne"],["formControlName","authorTwo","type","text","pInputText","","id","authorTwo",1,"w-full"],["htmlFor","authorTwo"],["formControlName","authorThree","type","text","pInputText","","id","authorThree",1,"w-full"],["htmlFor","authorThree"],["required","","formControlName","assessor","type","text","pInputText","","id","assessor",1,"w-full"],["htmlFor","assessor"],["required","","formControlName","year","type","year","pInputText","","id","year",1,"w-full"],["htmlFor","year"],[1,"flex","w-full","flex-column","sm:w-6"],[3,"isLoading","invalid"],["position","top-center"],[1,"ml-2","text-red-500"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return o.onSave()}),t.j41(2,"p",2),t.EFF(3,"Agrega una nueva tesis a la colecci\xf3n"),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"span",5),t.nrm(7,"input",6),t.j41(8,"label",7),t.EFF(9,"T\xedtulo de la tesis"),t.k0s()(),t.DNE(10,Ri,2,1,"small",8),t.k0s(),t.j41(11,"div",4)(12,"span",5),t.nrm(13,"input",9),t.j41(14,"label",10),t.EFF(15,"Nombre del primer autor"),t.k0s()(),t.DNE(16,xi,2,1,"small",8),t.k0s()(),t.j41(17,"div",3)(18,"div",4)(19,"span",5),t.nrm(20,"input",11),t.j41(21,"label",12),t.EFF(22,"Nombre del segundo autor"),t.k0s()()(),t.j41(23,"div",4)(24,"span",5),t.nrm(25,"input",13),t.j41(26,"label",14),t.EFF(27,"Nombre del tercer autor"),t.k0s()()()(),t.j41(28,"div",3)(29,"div",4)(30,"span",5),t.nrm(31,"input",15),t.j41(32,"label",16),t.EFF(33,"Nombre del asesor"),t.k0s()(),t.DNE(34,Ti,2,1,"small",8),t.k0s(),t.j41(35,"div",4)(36,"span",5),t.nrm(37,"input",17),t.j41(38,"label",18),t.EFF(39,"A\xf1o"),t.k0s()(),t.DNE(40,Ci,2,1,"small",8),t.k0s()(),t.j41(41,"div",19),t.nrm(42,"dashboard-add-button",20),t.k0s(),t.nrm(43,"p-toast",21),t.k0s()()),2&s&&(t.R7$(1),t.Y8G("formGroup",o.form),t.R7$(9),t.Y8G("ngIf",o.isValidField("title")),t.R7$(6),t.Y8G("ngIf",o.isValidField("authorOne")),t.R7$(18),t.Y8G("ngIf",o.isValidField("assessor")),t.R7$(6),t.Y8G("ngIf",o.isValidField("year")),t.R7$(2),t.Y8G("isLoading",o.loading)("invalid",o.form.invalid))},dependencies:[h.bT,n.qT,n.me,n.BC,n.cb,n.YS,n.j4,n.JD,f.S,g.y8,y],encapsulation:2})}return i})();function $i(i,r){if(1&i&&(t.j41(0,"small",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("title"))}}function wi(i,r){if(1&i&&(t.j41(0,"small",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.SpI("",e.displayError("authorOne")," ")}}function Ni(i,r){if(1&i&&(t.j41(0,"small",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.SpI("",e.displayError("assessor")," ")}}function Pi(i,r){if(1&i&&(t.j41(0,"small",18),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.JRh(e.displayError("year"))}}function Ii(i,r){if(1&i&&(t.j41(0,"form",3)(1,"div",4)(2,"label",5),t.EFF(3,"T\xedtulo"),t.k0s(),t.nrm(4,"input",6),t.DNE(5,$i,2,1,"small",7),t.k0s(),t.j41(6,"div",4)(7,"label",8),t.EFF(8,"Autor"),t.k0s(),t.nrm(9,"input",9),t.DNE(10,wi,2,1,"small",7),t.k0s(),t.j41(11,"div",4)(12,"label",10),t.EFF(13,"Autor dos"),t.k0s(),t.nrm(14,"input",11),t.k0s(),t.j41(15,"div",4)(16,"label",12),t.EFF(17,"Autor tres"),t.k0s(),t.nrm(18,"input",13),t.k0s(),t.j41(19,"div",4)(20,"label",14),t.EFF(21,"Asesor"),t.k0s(),t.nrm(22,"input",15),t.DNE(23,Ni,2,1,"small",7),t.k0s(),t.j41(24,"div",4)(25,"label",16),t.EFF(26,"A\xf1o"),t.k0s(),t.nrm(27,"input",17),t.DNE(28,Pi,2,1,"small",7),t.k0s()()),2&i){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(5),t.Y8G("ngIf",e.isValidField("title")),t.R7$(5),t.Y8G("ngIf",e.isValidField("authorOne")),t.R7$(13),t.Y8G("ngIf",e.isValidField("assessor")),t.R7$(5),t.Y8G("ngIf",e.isValidField("year"))}}function Gi(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.hideDialog())}),t.k0s(),t.j41(1,"button",20),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.save())}),t.k0s()}}const q=function(){return{width:"450px"}};let Li=(()=>{class i{ngOnInit(){this.utilitiesService.isVisible$.subscribe(e=>{this.isVisible=e})}ngOnChanges(e){e.thesis&&this.patchFormValues()}constructor(e,s,o,a){this.fb=e,this.messageService=s,this.thesisService=o,this.utilitiesService=a,this.updatedList=new t.bkB,this.isVisible=!1,this.form=this.fb.group({title:[this.thesis?.title,[n.k0.required]],authorOne:[this.thesis?.authorOne,[n.k0.required]],authorTwo:[this.thesis?.authorTwo],authorThree:[this.thesis?.authorThree],year:[this.thesis?.year,[n.k0.required,n.k0.minLength(4),n.k0.maxLength(4)]],assessor:[this.thesis?.assessor,[n.k0.required]]})}hideDialog(){this.isVisible=!1}save(){this.form.invalid?this.form.markAllAsTouched():(this.thesisService.updateThesis(this.thesis.id,this.form.value).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Se actualiz\xf3 el registro"}),this.thesisService.getThesis().subscribe(e=>this.updatedList.emit(e))},error:e=>{this.messageService.add({severity:"error",summary:"Ups!",detail:`${e}`})}}),this.isVisible=!1)}isValidField(e){return F(e,this.form)}displayError(e){return b(e,this.form)}patchFormValues(){this.thesis&&this.form.patchValue(this.thesis)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(n.ok),t.rXU(p.bg),t.rXU(T),t.rXU(v))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["dashboard-modal-thesis"]],inputs:{thesis:"thesis"},outputs:{updatedList:"updatedList"},features:[t.OA$],decls:4,vars:8,consts:[["header","Editar libro","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[3,"formGroup"],[1,"field"],["for","title"],["formControlName","title","type","text","pInputText","","id","title","required",""],["class","ml-2 text-red-500",4,"ngIf"],["for","authorOne"],["formControlName","authorOne","type","text","pInputText","","id","authorOne","required",""],["for","authorTwo"],["formControlName","authorTwo","type","text","pInputText","","id","authorTwo"],["for","authorThree"],["formControlName","authorThree","type","authorThree","pInputText","","id","authorThree"],["for","assessor"],["formControlName","assessor","type","text","pInputText","","id","assessor","required",""],["for","year"],["formControlName","year","type","number","pInputText","","id","year","required",""],[1,"ml-2","text-red-500"],["pButton","","pRipple","","label","Cancelar","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"click"]],template:function(s,o){1&s&&(t.j41(0,"p-dialog",0),t.bIt("visibleChange",function(l){return o.isVisible=l}),t.DNE(1,Ii,29,5,"ng-template",1),t.DNE(2,Gi,2,0,"ng-template",2),t.k0s(),t.nrm(3,"p-confirmDialog")),2&s&&(t.Aen(t.lJ4(6,q)),t.Y8G("visible",o.isVisible)("modal",!0),t.R7$(3),t.Aen(t.lJ4(7,q)))},dependencies:[h.bT,n.qT,n.me,n.Q0,n.BC,n.cb,n.YS,n.j4,n.JD,_._f,p.Ei,w.T,L.l,f.S],encapsulation:2})}return i})();const Ai=["dt"];function Bi(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",9)(1,"h5",10),t.EFF(2,"B\xfasqueda por t\xedtulo de la obra o por colecci\xf3n"),t.k0s(),t.j41(3,"span",11),t.nrm(4,"i",12),t.j41(5,"input",13,14),t.bIt("input",function(o){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilterGlobal(o,"contains"))}),t.k0s()()()}}function Di(i,r){1&i&&(t.j41(0,"tr")(1,"th",15),t.EFF(2,"T\xedtulo"),t.nrm(3,"p-sortIcon",16),t.k0s(),t.j41(4,"th",17),t.EFF(5," Autor"),t.nrm(6,"p-sortIcon",18),t.k0s(),t.j41(7,"th",19),t.EFF(8,"Segundo autor"),t.nrm(9,"p-sortIcon",20),t.k0s(),t.j41(10,"th",21),t.EFF(11," Asesor"),t.nrm(12,"p-sortIcon",22),t.k0s(),t.j41(13,"th",23),t.EFF(14,"A\xf1o"),t.nrm(15,"p-sortIcon",24),t.k0s(),t.nrm(16,"th"),t.k0s())}function Vi(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td")(12,"button",25),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.edit(a))}),t.k0s(),t.j41(13,"button",26),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.delete(a))}),t.k0s()()()}if(2&i){const e=r.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(2),t.JRh(e.authorOne),t.R7$(2),t.JRh(e.authorTwo),t.R7$(2),t.JRh(e.assessor),t.R7$(2),t.JRh(e.year)}}function Xi(i,r){if(1&i&&(t.j41(0,"div",27),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI(" Hay un total de ",e.thesisList?e.thesisList.length:0," Tesis registradas ")}}const Ji=function(){return["title","collection"]},Ui=function(){return{"min-width":"75rem"}};let Yi=(()=>{class i{ngOnInit(){this.thesisService.getThesis().subscribe(e=>this.thesisList=e),this.utilitiesService.setVisibility(!1)}constructor(e,s,o,a){this.confirmationService=e,this.messageService=s,this.thesisService=o,this.utilitiesService=a,this.thesisList=[]}edit(e){this.utilitiesService.setVisibility(!0),this.thesis=e}delete(e){this.confirmationService.confirm({message:"\xbfEst\xe1s seguro de eliminar: "+e.title+"?",header:"Confirmar acci\xf3n",icon:"pi pi-exclamation-triangle",accept:()=>{this.thesisService.deleteThesis(e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Libro eliminado",life:3e3}),this.thesisList=this.thesisList.filter(s=>s.id!==e.id)},error:s=>{this.messageService.add({severity:"error",summary:"Error",detail:`${s}`,life:3e3})}})}})}updateThesis(e){this.thesisList=e}applyFilterGlobal(e,s){this.utilitiesService.filtering(e,s,this.dt)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(p.td),t.rXU(p.bg),t.rXU(T),t.rXU(v))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["dashboard-edit-thesis-page"]],viewQuery:function(s,o){if(1&s&&t.GBs(Ai,5),2&s){let a;t.mGM(a=t.lsd())&&(o.dt=a.first)}},decls:11,vars:11,consts:[[1,"card","surface-section","py-6","px-4"],[1,"font-medium","text-primary"],["dataKey","id","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas",3,"value","rows","paginator","globalFilterFields","showLoader","tableStyle","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[3,"thesis","updatedList"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["textInput",""],["pSortableColumn","title",2,"min-width","15rem"],["field","title"],["pSortableColumn","adquisition",2,"min-width","15rem"],["field","adquisition"],["pSortableColumn","year",2,"min-width","15rem"],["field","year"],["pSortableColumn","collection",2,"min-width","15rem"],["field","collection"],["pSortableColumn","copies",2,"min-width","15rem"],["field","copies"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],[1,"flex","align-items-center","justify-content-center"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Panel para actualizar datos o eliminar elementos"),t.k0s(),t.nrm(3,"p-toast"),t.j41(4,"p-table",2,3),t.DNE(6,Bi,7,0,"ng-template",4),t.DNE(7,Di,17,0,"ng-template",5),t.DNE(8,Vi,14,5,"ng-template",6),t.DNE(9,Xi,2,1,"ng-template",7),t.k0s()(),t.j41(10,"dashboard-modal-thesis",8),t.bIt("updatedList",function(l){return o.updateThesis(l)}),t.k0s()),2&s&&(t.R7$(4),t.Y8G("value",o.thesisList)("rows",10)("paginator",!0)("globalFilterFields",t.lJ4(9,Ji))("showLoader",!0)("tableStyle",t.lJ4(10,Ui))("rowHover",!0)("showCurrentPageReport",!0),t.R7$(6),t.Y8G("thesis",o.thesis))},dependencies:[_._f,p.Ei,f.S,d.XI,d.Tg,d.yc,g.y8,Li],encapsulation:2})}return i})();function qi(i,r){1&i&&(t.j41(0,"tr")(1,"th",5),t.EFF(2,"T\xedtulo"),t.k0s(),t.j41(3,"th",5),t.EFF(4,"Autor uno"),t.k0s(),t.j41(5,"th",5),t.EFF(6,"Autor dos"),t.k0s(),t.j41(7,"th",5),t.EFF(8,"Autor tres"),t.k0s(),t.j41(9,"th",5),t.EFF(10,"Asesor"),t.k0s(),t.j41(11,"th",5),t.EFF(12,"A\xf1o"),t.k0s()())}function Mi(i,r){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s()()),2&i){const e=r.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(2),t.JRh(e.authorOne),t.R7$(2),t.JRh(e.authorTwo),t.R7$(2),t.JRh(e.authorThree),t.R7$(2),t.JRh(e.assessor),t.R7$(2),t.JRh(e.year)}}const Oi=function(){return{"min-width":"50rem"}},Ki=function(){return[10,20]},Wi=[{path:"",component:ot,children:[{path:"books",component:At},{path:"add-book",component:Nt},{path:"edit-book",component:ie},{path:"thesis",component:(()=>{class i{ngOnInit(){this.thesisService.getThesis().subscribe(e=>this.thesis=e)}constructor(e){this.thesisService=e,this.thesis=[]}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(T))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-thesis-page"]],decls:6,vars:8,consts:[[1,"card","surface-section","py-6","px-4"],[1,"font-medium","text-primary"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas","paginatorLocale","es-Es",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[2,"width","10%"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2,"Inventario de tesis dadas de alta"),t.k0s(),t.j41(3,"p-table",2),t.DNE(4,qi,13,0,"ng-template",3),t.DNE(5,Mi,13,6,"ng-template",4),t.k0s()()),2&s&&(t.R7$(3),t.Y8G("value",o.thesis)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",t.lJ4(6,Oi))("rowsPerPageOptions",t.lJ4(7,Ki)))},dependencies:[p.Ei,d.XI],encapsulation:2})}return i})()},{path:"add-thesis",component:Si},{path:"edit-thesis",component:Yi},{path:"publications",component:He},{path:"add-publication",component:Te},{path:"edit-publication",component:Me},{path:"loans",component:de},{path:"new-loan",component:ge},{path:"register-user",component:pi},{path:"registered-students",component:ji},{path:"registered-professors",component:bi},{path:"registered-administratives",component:hi},{path:"new-account",component:ht},{path:"registered-accounts",component:yt},{path:"change-password",component:lt},{path:"welcome",component:(()=>{class i{constructor(e,s){this.accountsService=e,this.usersService=s,this.accounts=[],this.date=new Date,this.users=[]}ngOnInit(){this.accountsService.getAccountsList().subscribe(e=>this.accounts=e),this.usersService.getAllUsers().subscribe(e=>this.users=e)}static#t=this.\u0275fac=function(s){return new(s||i)(t.rXU(S),t.rXU(R))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-welcome-page"]],decls:60,vars:5,consts:[[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"pi","pi-id-card","mr-2"],[1,"pi","pi-users","mr-2"],[1,"flex","align-items-center","mt-3"],[1,"pi","pi-clock","mr-2"],[1,"mt-3","lg:mt-0"],[1,"surface-section","px-4","py-4","md:px-6","lg:px-8","text-center"],[1,"mb-6","font-bold","text-3xl"],[1,"text-900"],[1,"text-primary"],[1,"grid"],[1,"col-12","md:col-4","mb-4","px-5"],[1,"p-3","shadow-2","mb-3","inline-block","surface-card",2,"border-radius","10px"],[1,"pi","pi-desktop","text-4xl","text-primary"],[1,"text-900","text-xl","mb-3","font-medium"],[1,"text-700","line-height-3"],[1,"pi","pi-lock","text-4xl","text-primary"],[1,"pi","pi-check-circle","text-4xl","text-primary"],[1,"pi","pi-globe","text-4xl","text-primary"],[1,"col-12","md:col-4","md:mb-4","mb-0","px-3"],[1,"pi","pi-shield","text-4xl","text-primary"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"div",3),t.nrm(5,"i",4),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"div",3),t.nrm(9,"i",5),t.j41(10,"span"),t.EFF(11),t.k0s()(),t.j41(12,"div",6),t.nrm(13,"i",7),t.j41(14,"span"),t.EFF(15),t.nI1(16,"date"),t.k0s()()()(),t.nrm(17,"div",8),t.k0s()(),t.j41(18,"div",9)(19,"div",10)(20,"span",11),t.EFF(21,"Sistema de Gesti\xf3n Bibliotecario"),t.k0s(),t.j41(22,"span",12),t.EFF(23," (SISGEB)"),t.k0s()(),t.j41(24,"div",13)(25,"div",14)(26,"span",15),t.nrm(27,"i",16),t.k0s(),t.j41(28,"div",17),t.EFF(29,"Gestiona"),t.k0s(),t.j41(30,"span",18),t.EFF(31,"Desde cualquier lugar, solo necesitas acceso tus credenciales y acceso a internet."),t.k0s()(),t.j41(32,"div",14)(33,"span",15),t.nrm(34,"i",19),t.k0s(),t.j41(35,"div",17),t.EFF(36,"Seguridad"),t.k0s(),t.j41(37,"span",18),t.EFF(38,"Con nuestro sistema de autenticaci\xf3n, tu informaci\xf3n siempre estar\xe1 a salvo."),t.k0s()(),t.j41(39,"div",14)(40,"span",15),t.nrm(41,"i",20),t.k0s(),t.j41(42,"div",17),t.EFF(43,"F\xe1cil de usar"),t.k0s(),t.j41(44,"span",18),t.EFF(45,"El dise\xf1o intuitivo y de facil acceso, permite crear y gestionar registros f\xe1cilmente."),t.k0s()(),t.j41(46,"div",14)(47,"span",15),t.nrm(48,"i",21),t.k0s(),t.j41(49,"div",17),t.EFF(50,"R\xe1pido y de acceso global"),t.k0s(),t.j41(51,"span",18),t.EFF(52,"Ten seguridad y confianza al momento de acceder a tus registros."),t.k0s()(),t.j41(53,"div",22)(54,"span",15),t.nrm(55,"i",23),t.k0s(),t.j41(56,"div",17),t.EFF(57,"Confiable"),t.k0s(),t.j41(58,"span",18),t.EFF(59,"Gestiona las cuentas e informaci\xf3n personal de manera eficiente."),t.k0s()()()()),2&s&&(t.R7$(7),t.SpI("Cuentas registradas: ",o.accounts.length,""),t.R7$(4),t.SpI("Total usuarios: ",o.users.length,""),t.R7$(4),t.SpI("\xdaltima sesi\xf3n: ",t.bMT(16,3,o.date),""))},dependencies:[h.vh],encapsulation:2})}return i})()}]}];let zi=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[G.iI.forChild(Wi),G.iI]})}return i})();var M=c(7743);let Hi=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[h.MD,M.t,n.YN]})}return i})(),Qi=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({providers:[p.td,p.bg,T,v],imports:[h.MD,n.X1,zi,Hi,M.t]})}return i})()}}]);